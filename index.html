<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Вирусный менеджер - Эволюция и Мутации</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background-color: #0f0f23;
            color: #e6e6e6;
            line-height: 1.6;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(233, 69, 96, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(78, 205, 196, 0.1) 0%, transparent 20%);
        }
        
        .container {
            max-width: 1700px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #16213e 0%, #0f3460 100%);
            border-radius: 15px;
            border-bottom: 5px solid #e94560;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            font-size: 3rem;
            color: #e94560;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(233, 69, 96, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #b8b8b8;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .game-layout {
            display: grid;
            grid-template-columns: 350px 1fr 400px;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1400px) {
            .game-layout {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @media (max-width: 1000px) {
            .game-layout {
                grid-template-columns: 1fr;
            }
        }
        
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .center-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .right-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .panel {
            background: linear-gradient(145deg, #16213e 0%, #1a1a2e 100%);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #0f3460;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s;
        }
        
        .panel:hover {
            transform: translateY(-5px);
        }
        
        .panel-title {
            font-size: 1.5rem;
            color: #e94560;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #0f3460;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .resources-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .resource {
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid #2a4a8a;
            transition: transform 0.3s;
        }
        
        .resource:hover {
            transform: translateY(-3px);
        }
        
        .resource-icon {
            font-size: 2.5rem;
            color: #e94560;
            margin-bottom: 15px;
        }
        
        .resource-name {
            font-size: 1rem;
            color: #b8b8b8;
            margin-bottom: 8px;
        }
        
        .resource-amount {
            font-size: 2.2rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .clicker-area {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, rgba(15, 52, 96, 0.5) 0%, rgba(26, 26, 46, 0.5) 100%);
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .virus-cell {
            width: 160px;
            height: 160px;
            margin: 0 auto 20px;
            background: radial-gradient(circle, #e94560 0%, #b82e46 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            border: 5px solid #ff6b8b;
            box-shadow: 
                0 0 30px rgba(233, 69, 96, 0.7),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 30px rgba(233, 69, 96, 0.7), inset 0 0 20px rgba(255, 255, 255, 0.1); }
            50% { box-shadow: 0 0 50px rgba(233, 69, 96, 0.9), inset 0 0 30px rgba(255, 255, 255, 0.2); }
            100% { box-shadow: 0 0 30px rgba(233, 69, 96, 0.7), inset 0 0 20px rgba(255, 255, 255, 0.1); }
        }
        
        .virus-cell:active {
            transform: scale(0.95);
            animation: none;
            box-shadow: 0 0 20px rgba(233, 69, 96, 0.5), inset 0 0 15px rgba(0, 0, 0, 0.3);
        }
        
        .virus-icon {
            font-size: 4.5rem;
            color: #ffffff;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        .click-info {
            margin-top: 15px;
            color: #b8b8b8;
            font-size: 1.1rem;
        }
        
        .power-info {
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e94560;
        }
        
        .power-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #e94560;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .power-label {
            text-align: center;
            color: #b8b8b8;
            font-size: 1.2rem;
        }
        
        .tabs-container {
            margin-bottom: 20px;
        }
        
        .tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            border-bottom: 3px solid #0f3460;
            padding-bottom: 15px;
        }
        
        .tab {
            padding: 12px 24px;
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            color: #e6e6e6;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            font-weight: bold;
            flex: 1;
            text-align: center;
        }
        
        .tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .tab.active {
            background: linear-gradient(135deg, #e94560 0%, #ff6b8b 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .upgrades-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .upgrade {
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 5px solid #e94560;
            position: relative;
            overflow: hidden;
        }
        
        .upgrade:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
        }
        
        .upgrade:hover:before {
            animation: shine 1.5s;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .upgrade:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .upgrade.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-left-color: #666;
        }
        
        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .upgrade-name {
            font-size: 1.3rem;
            color: #ffffff;
            font-weight: bold;
        }
        
        .upgrade-cost {
            font-size: 1.2rem;
            color: #ffd166;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 12px;
            border-radius: 20px;
        }
        
        .upgrade-desc {
            font-size: 1rem;
            color: #b8b8b8;
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .upgrade-effect {
            font-size: 0.95rem;
            color: #4ecdc4;
            font-style: italic;
            margin-bottom: 15px;
            padding: 8px;
            background: rgba(78, 205, 196, 0.1);
            border-radius: 8px;
        }
        
        .upgrade-progress {
            height: 8px;
            background-color: #1a1a2e;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
        }
        
        .upgrade-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #e94560, #ff6b8b);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }
        
        /* Центральная панель - виды для заражения */
        .species-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            max-height: 700px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .species-item {
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.4s;
            border: 2px solid transparent;
            position: relative;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .species-item:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #e94560, #ff6b8b);
        }
        
        .species-item:hover {
            transform: translateY(-10px) rotateX(5deg);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
        }
        
        .species-item.locked {
            opacity: 0.4;
            filter: grayscale(100%);
        }
        
        .species-item.infected {
            border-color: #e94560;
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.2) 0%, #1b3a6e 100%);
        }
        
        .species-item.extinct {
            border-color: #4ecdc4;
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.2) 0%, #1b3a6e 100%);
        }
        
        .species-icon {
            font-size: 3.5rem;
            color: #e94560;
            margin-bottom: 15px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .species-name {
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 8px;
            font-size: 1.3rem;
        }
        
        .species-type {
            font-size: 0.9rem;
            color: #ffd166;
            margin-bottom: 10px;
            background: rgba(255, 209, 102, 0.1);
            padding: 3px 10px;
            border-radius: 15px;
            display: inline-block;
        }
        
        .species-desc {
            font-size: 0.9rem;
            color: #b8b8b8;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .species-power {
            font-size: 1rem;
            color: #ffd166;
            margin-bottom: 15px;
        }
        
        .species-btn {
            padding: 12px 20px;
            background: linear-gradient(135deg, #e94560 0%, #ff6b8b 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            margin-top: auto;
        }
        
        .species-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4);
        }
        
        .species-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .species-btn.infecting {
            background: linear-gradient(135deg, #4ecdc4 0%, #2a9d8f 100%);
        }
        
        .progress-container {
            margin-top: 15px;
        }
        
        .progress-label {
            font-size: 0.9rem;
            color: #b8b8b8;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #1a1a2e;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }
        
        .infection-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #e94560, #ff6b8b);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .cure-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #2a9d8f);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .species-status {
            font-size: 0.9rem;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 10px;
            margin-top: 10px;
        }
        
        .status-infected {
            color: #e94560;
            background: rgba(233, 69, 96, 0.1);
        }
        
        .status-extinct {
            color: #4ecdc4;
            background: rgba(78, 205, 196, 0.1);
        }
        
        /* Правая панель - мутации и эволюция */
        .mutations-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .mutation {
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .mutation:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .mutation.unlocked {
            border-color: #ffd166;
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.1) 0%, #1b3a6e 100%);
        }
        
        .mutation.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .mutation-icon {
            font-size: 2rem;
            color: #e94560;
            margin-bottom: 10px;
        }
        
        .mutation-name {
            font-weight: bold;
            color: #ffffff;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        
        .mutation-desc {
            font-size: 0.85rem;
            color: #b8b8b8;
            margin-bottom: 10px;
        }
        
        .mutation-cost {
            font-size: 0.9rem;
            color: #ffd166;
            font-weight: bold;
        }
        
        .evolution-section {
            margin-top: 20px;
        }
        
        .evolution-display {
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 20px;
            border: 3px solid #e94560;
        }
        
        .evolution-level {
            font-size: 2.5rem;
            font-weight: bold;
            color: #e94560;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .evolution-name {
            color: #ffffff;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }
        
        .evolution-bar {
            height: 12px;
            background-color: #1a1a2e;
            border-radius: 6px;
            overflow: hidden;
            margin-top: 15px;
        }
        
        .evolution-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #e94560, #ff6b8b, #4ecdc4);
            border-radius: 6px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .stats-section {
            background: linear-gradient(135deg, #0f3460 0%, #1b3a6e 100%);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .stat {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #e94560;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #b8b8b8;
        }
        
        .cure-section {
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1) 0%, #1b3a6e 100%);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #4ecdc4;
        }
        
        .cure-title {
            font-size: 1.3rem;
            color: #4ecdc4;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cure-stats {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .cure-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cure-stat-name {
            color: #b8b8b8;
            font-size: 1rem;
        }
        
        .cure-stat-value {
            color: #4ecdc4;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .cure-resistance-bar {
            height: 10px;
            background-color: #1a1a2e;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .cure-resistance-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #2a9d8f);
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #16213e 0%, #0f3460 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid #e94560;
            max-width: 350px;
            transform: translateX(400px);
            transition: transform 0.4s;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: #b8b8b8;
            font-size: 1rem;
            border-top: 3px solid #0f3460;
            background: linear-gradient(135deg, rgba(22, 33, 62, 0.5) 0%, rgba(15, 52, 96, 0.5) 100%);
            border-radius: 15px;
        }
        
        .species-count {
            font-size: 0.9rem;
            color: #ffd166;
            margin-top: 10px;
        }
        
        .mutation-effect {
            font-size: 0.8rem;
            color: #4ecdc4;
            margin-top: 5px;
            font-style: italic;
        }
        
        .extinction-bonus {
            color: #4ecdc4;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .adaptation-bonus {
            color: #ffd166;
            font-size: 0.85rem;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-virus"></i> ВИРУСНЫЙ МЕНЕДЖЕР</h1>
            <p class="subtitle">Эволюционируйте, мутируйте, адаптируйтесь! Заражайте виды и доводите их до вымирания, чтобы получить уникальные бонусы!</p>
        </header>
        
        <div class="game-layout">
            <!-- Левая панель - ресурсы и улучшения -->
            <div class="left-panel">
                <div class="panel">
                    <h2 class="panel-title"><i class="fas fa-chart-line"></i> Ресурсы и сила</h2>
                    
                    <div class="resources-grid">
                        <div class="resource">
                            <div class="resource-icon"><i class="fas fa-dna"></i></div>
                            <div class="resource-name">Сила вируса</div>
                            <div class="resource-amount" id="virus-power">100</div>
                        </div>
                        
                        <div class="resource">
                            <div class="resource-icon"><i class="fas fa-bolt"></i></div>
                            <div class="resource-name">Энергия мутации</div>
                            <div class="resource-amount" id="energy">50</div>
                        </div>
                        
                        <div class="resource">
                            <div class="resource-icon"><i class="fas fa-microscope"></i></div>
                            <div class="resource-name">Зараженные клетки</div>
                            <div class="resource-amount" id="cells">1</div>
                        </div>
                        
                        <div class="resource">
                            <div class="resource-icon"><i class="fas fa-star"></i></div>
                            <div class="resource-name">Очки мутации</div>
                            <div class="resource-amount" id="mutation-points">0</div>
                        </div>
                    </div>
                    
                    <div class="clicker-area">
                        <div class="virus-cell" id="virus-cell">
                            <div class="virus-icon"><i class="fas fa-virus"></i></div>
                        </div>
                        <p class="click-info">Кликните для заражения клеток</p>
                        <p class="click-info">За клик: <span id="click-power">1</span> силы, <span id="click-energy">0.5</span> энергии</p>
                    </div>
                    
                    <div class="power-info">
                        <div class="power-value" id="total-power">100</div>
                        <div class="power-label">Общая сила заражения</div>
                    </div>
                </div>
                
                <div class="panel">
                    <div class="tabs-container">
                        <div class="tabs">
                            <div class="tab active" data-tab="upgrades">Улучшения</div>
                            <div class="tab" data-tab="mutations">Мутации</div>
                        </div>
                        
                        <div class="tab-content active" id="upgrades-tab">
                            <div class="upgrades-grid">
                                <div class="upgrade" id="upgrade1" onclick="buyUpgrade(1)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Острые шипы</div>
                                        <div class="upgrade-cost">50 силы</div>
                                    </div>
                                    <div class="upgrade-desc">Улучшает проникновение вируса в клетки</div>
                                    <div class="upgrade-effect">+2 силы за клик, +5% к скорости заражения</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="upgrade1-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="upgrade2" onclick="buyUpgrade(2)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Авторепликация</div>
                                        <div class="upgrade-cost">100 силы</div>
                                    </div>
                                    <div class="upgrade-desc">Вирус размножается самостоятельно</div>
                                    <div class="upgrade-effect">Автозаражение 1 клетки/5сек, +10% к автоинфекции</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="upgrade2-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="upgrade3" onclick="buyUpgrade(3)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Энергетическая оболочка</div>
                                        <div class="upgrade-cost">80 энергии</div>
                                    </div>
                                    <div class="upgrade-desc">Повышает энергоэффективность вируса</div>
                                    <div class="upgrade-effect">+1 энергии за клик, +15% к выработке энергии</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="upgrade3-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="upgrade4" onclick="buyUpgrade(4)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Устойчивость к лечению</div>
                                        <div class="upgrade-cost">150 силы</div>
                                    </div>
                                    <div class="upgrade-desc">Защищает вирус от методов лечения</div>
                                    <div class="upgrade-effect">+10% сопротивления лечению, -5% к скорости лечения</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="upgrade4-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="upgrade5" onclick="buyUpgrade(5)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Быстрая эволюция</div>
                                        <div class="upgrade-cost">200 силы</div>
                                    </div>
                                    <div class="upgrade-desc">Ускоряет процесс эволюции вируса</div>
                                    <div class="upgrade-effect">+20% к скорости эволюции, +1 очко мутации при эволюции</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="upgrade5-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="upgrade6" onclick="buyUpgrade(6)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Массовое заражение</div>
                                        <div class="upgrade-cost">300 силы</div>
                                    </div>
                                    <div class="upgrade-desc">Позволяет заражать несколько видов одновременно</div>
                                    <div class="upgrade-effect">+2 слота для заражения, +25% к скорости заражения видов</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="upgrade6-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="mutations-tab">
                            <div class="upgrades-grid">
                                <div class="upgrade" id="mutation1" onclick="buyMutation(1)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Адаптация к млекопитающим</div>
                                        <div class="upgrade-cost">3 очка мутации</div>
                                    </div>
                                    <div class="upgrade-desc">Вирус адаптируется для заражения млекопитающих</div>
                                    <div class="upgrade-effect">+50% к скорости заражения млекопитающих, -30% к их лечению</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="mutation1-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="mutation2" onclick="buyMutation(2)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Адаптация к птицам</div>
                                        <div class="upgrade-cost">4 очка мутации</div>
                                    </div>
                                    <div class="upgrade-desc">Вирус учится заражать пернатых</div>
                                    <div class="upgrade-effect">Открывает птиц для заражения, +40% к их скорости заражения</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="mutation2-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="mutation3" onclick="buyMutation(3)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Адаптация к водным видам</div>
                                        <div class="upgrade-cost">5 очков мутации</div>
                                    </div>
                                    <div class="upgrade-desc">Вирус адаптируется к водной среде</div>
                                    <div class="upgrade-effect">Открывает водные виды, +35% к их скорости заражения</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="mutation3-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="mutation4" onclick="buyMutation(4)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Невидимость для иммунитета</div>
                                        <div class="upgrade-cost">6 очков мутации</div>
                                    </div>
                                    <div class="upgrade-desc">Вирус становится невидимым для иммунной системы</div>
                                    <div class="upgrade-effect">-40% к скорости лечения всех видов, +15% к скрытности</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="mutation4-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="mutation5" onclick="buyMutation(5)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Сверхбыстрая мутация</div>
                                        <div class="upgrade-cost">8 очков мутации</div>
                                    </div>
                                    <div class="upgrade-desc">Вирус мутирует с невероятной скоростью</div>
                                    <div class="upgrade-effect">+50% к скорости эволюции, +2 очка мутации при эволюции</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="mutation5-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="upgrade" id="mutation6" onclick="buyMutation(6)">
                                    <div class="upgrade-header">
                                        <div class="upgrade-name">Летальная форма</div>
                                        <div class="upgrade-cost">10 очков мутации</div>
                                    </div>
                                    <div class="upgrade-desc">Вирус становится смертельно опасным</div>
                                    <div class="upgrade-effect">+100% к урону видам, +50% к скорости вымирания</div>
                                    <div class="upgrade-progress">
                                        <div class="upgrade-progress-bar" id="mutation6-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Центральная панель - виды для заражения -->
            <div class="center-panel">
                <div class="panel">
                    <h2 class="panel-title"><i class="fas fa-globe-americas"></i> Мир для заражения</h2>
                    
                    <div class="tabs-container">
                        <div class="tabs">
                            <div class="tab active" data-tab="all">Все виды</div>
                            <div class="tab" data-tab="mammals">Млекопитающие</div>
                            <div class="tab" data-tab="birds">Птицы</div>
                            <div class="tab" data-tab="water">Водные</div>
                            <div class="tab" data-tab="special">Особые</div>
                        </div>
                        
                        <div class="tab-content active" id="all-tab">
                            <div class="species-grid" id="all-species">
                                <!-- Все виды будут добавлены через JavaScript -->
                            </div>
                        </div>
                        
                        <div class="tab-content" id="mammals-tab">
                            <div class="species-grid" id="mammals-species">
                                <!-- Млекопитающие будут добавлены через JavaScript -->
                            </div>
                        </div>
                        
                        <div class="tab-content" id="birds-tab">
                            <div class="species-grid" id="birds-species">
                                <!-- Птицы будут добавлены через JavaScript -->
                            </div>
                        </div>
                        
                        <div class="tab-content" id="water-tab">
                            <div class="species-grid" id="water-species">
                                <!-- Водные будут добавлены через JavaScript -->
                            </div>
                        </div>
                        
                        <div class="tab-content" id="special-tab">
                            <div class="species-grid" id="special-species">
                                <!-- Особые будут добавлены через JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="species-count" id="species-count">Заражено: 0/25 | Вымерло: 0</div>
                </div>
            </div>
            
            <!-- Правая панель - свойства и статистика -->
            <div class="right-panel">
                <div class="panel">
                    <h2 class="panel-title"><i class="fas fa-dna"></i> Мутации и адаптации</h2>
                    
                    <div class="mutations-grid">
                        <div class="mutation" id="adaptation1" onclick="buyAdaptation(1)">
                            <div class="mutation-icon"><i class="fas fa-paw"></i></div>
                            <div class="mutation-name">Адаптация к хищникам</div>
                            <div class="mutation-desc">Повышает эффективность против хищников</div>
                            <div class="mutation-cost">2 очка мутации</div>
                            <div class="mutation-effect">+25% к заражению хищников</div>
                        </div>
                        
                        <div class="mutation" id="adaptation2" onclick="buyAdaptation(2)">
                            <div class="mutation-icon"><i class="fas fa-home"></i></div>
                            <div class="mutation-name">Адаптация к домашним</div>
                            <div class="mutation-desc">Эффективнее заражает домашних животных</div>
                            <div class="mutation-cost">2 очка мутации</div>
                            <div class="mutation-effect">+30% к заражению домашних видов</div>
                        </div>
                        
                        <div class="mutation" id="adaptation3" onclick="buyAdaptation(3)">
                            <div class="mutation-icon"><i class="fas fa-mountain"></i></div>
                            <div class="mutation-name">Адаптация к диким</div>
                            <div class="mutation-desc">Эффективнее заражает диких животных</div>
                            <div class="mutation-cost">3 очка мутации</div>
                            <div class="mutation-effect">+35% к заражению диких видов</div>
                        </div>
                        
                        <div class="mutation" id="adaptation4" onclick="buyAdaptation(4)">
                            <div class="mutation-icon"><i class="fas fa-users"></i></div>
                            <div class="mutation-name">Адаптация к людям</div>
                            <div class="mutation-desc">Специализация на заражении людей</div>
                            <div class="mutation-cost">5 очков мутации</div>
                            <div class="mutation-effect">+50% к заражению людей, -40% к их лечению</div>
                        </div>
                    </div>
                    
                    <div class="evolution-section">
                        <div class="evolution-display">
                            <div class="evolution-level">Эволюция: <span id="evolution-level">1</span></div>
                            <div class="evolution-name" id="evolution-name">Примитивный вирус</div>
                            <div>Прогресс до следующего уровня:</div>
                            <div class="evolution-bar">
                                <div class="evolution-bar-fill" id="evolution-progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="panel">
                    <h2 class="panel-title"><i class="fas fa-chart-pie"></i> Статистика и лечение</h2>
                    
                    <div class="stats-section">
                        <div class="stats-grid">
                            <div class="stat">
                                <div class="stat-value" id="total-infected">0</div>
                                <div class="stat-label">Всего заражено</div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-value" id="infected-species">0</div>
                                <div class="stat-label">Видов заражено</div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-value" id="extinct-species">0</div>
                                <div class="stat-label">Видов вымерло</div>
                            </div>
                            
                            <div class="stat">
                                <div class="stat-value" id="auto-infect">0/сек</div>
                                <div class="stat-label">Автозаражение</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cure-section">
                        <div class="cure-title">
                            <i class="fas fa-shield-virus"></i> Лечение и вымирание
                        </div>
                        
                        <div class="cure-stats">
                            <div class="cure-stat">
                                <span class="cure-stat-name">Сопротивление лечению:</span>
                                <span class="cure-stat-value" id="cure-resistance-value">10%</span>
                            </div>
                            <div class="cure-resistance-bar">
                                <div class="cure-resistance-fill" id="cure-resistance-bar" style="width: 10%"></div>
                            </div>
                            
                            <div class="cure-stat">
                                <span class="cure-stat-name">Видов под лечением:</span>
                                <span class="cure-stat-value" id="species-under-cure">0</span>
                            </div>
                            
                            <div class="cure-stat">
                                <span class="cure-stat-name">Скорость вымирания:</span>
                                <span class="cure-stat-value" id="extinction-speed">0.1%/сек</span>
                            </div>
                            
                            <div class="cure-stat">
                                <span class="cure-stat-name">Бонус от вымирания:</span>
                                <span class="cure-stat-value" id="extinction-bonus">+0%</span>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; font-size: 0.9rem; color: #b8b8b8; line-height: 1.4;">
                            <i class="fas fa-info-circle"></i> Виды начинают лечиться сразу после заражения. 
                            Если лечение достигнет 100% - вид выздоровеет. Если заражение достигнет 100% - вид вымрет, давая бонусы!
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p><i class="fas fa-gamepad"></i> Вирусный менеджер: Эволюция и Мутации. Заражайте виды, эволюционируйте, адаптируйтесь и доводите виды до вымирания для получения уникальных бонусов!</p>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <div id="notification-text">Тестовое уведомление</div>
    </div>

    <script>
        // Игровые переменные
        let gameState = {
            virusPower: 100,
            energy: 50,
            cells: 1,
            mutationPoints: 0,
            evolutionLevel: 1,
            evolutionProgress: 0,
            totalPower: 100,
            clickPower: 1,
            clickEnergy: 0.5,
            autoInfectRate: 0,
            totalInfected: 0,
            infectedSpeciesCount: 0,
            extinctSpeciesCount: 0,
            cureResistance: 10,
            extinctionSpeed: 0.1,
            extinctionBonus: 0,
            maxActiveInfections: 1,
            
            // Улучшения
            upgrades: {
                1: { level: 0, maxLevel: 15, cost: 50, costMultiplier: 1.5, name: "Острые шипы", effect: { clickPower: 2, infectionSpeed: 5 }},
                2: { level: 0, maxLevel: 10, cost: 100, costMultiplier: 1.8, name: "Авторепликация", effect: { autoInfect: 0.2, infectionSpeed: 10 }},
                3: { level: 0, maxLevel: 12, cost: 80, costMultiplier: 1.6, name: "Энергетическая оболочка", effect: { clickEnergy: 0.5, energyProduction: 15 }},
                4: { level: 0, maxLevel: 8, cost: 150, costMultiplier: 1.7, name: "Устойчивость к лечению", effect: { cureResistance: 10, cureSpeed: -5 }},
                5: { level: 0, maxLevel: 5, cost: 200, costMultiplier: 2, name: "Быстрая эволюция", effect: { evolutionSpeed: 20, mutationPoints: 1 }},
                6: { level: 0, maxLevel: 3, cost: 300, costMultiplier: 2.5, name: "Массовое заражение", effect: { maxInfections: 2, infectionSpeed: 25 }}
            },
            
            // Мутации
            mutations: {
                1: { purchased: false, cost: 3, name: "Адаптация к млекопитающим", effect: { mammalInfection: 50, mammalCure: -30 }},
                2: { purchased: false, cost: 4, name: "Адаптация к птицам", effect: { unlockBirds: true, birdInfection: 40 }},
                3: { purchased: false, cost: 5, name: "Адаптация к водным видам", effect: { unlockWater: true, waterInfection: 35 }},
                4: { purchased: false, cost: 6, name: "Невидимость для иммунитета", effect: { cureSpeed: -40, stealth: 15 }},
                5: { purchased: false, cost: 8, name: "Сверхбыстрая мутация", effect: { evolutionSpeed: 50, mutationPoints: 2 }},
                6: { purchased: false, cost: 10, name: "Летальная форма", effect: { damage: 100, extinctionSpeed: 50 }}
            },
            
            // Адаптации
            adaptations: {
                1: { purchased: false, cost: 2, name: "Адаптация к хищникам", effect: { predatorInfection: 25 }},
                2: { purchased: false, cost: 2, name: "Адаптация к домашним", effect: { domesticInfection: 30 }},
                3: { purchased: false, cost: 3, name: "Адаптация к диким", effect: { wildInfection: 35 }},
                4: { purchased: false, cost: 5, name: "Адаптация к людям", effect: { humanInfection: 50, humanCure: -40 }}
            },
            
            // Виды для заражения (25 видов!)
            species: [
                // Млекопитающие (10 видов)
                { id: 1, name: "Мыши", type: "mammal", subtype: "rodent", icon: "fa-mouse", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 50, reward: { power: 30, energy: 15, mutation: 0 }, description: "Мелкие грызуны, легко заражаются", cureRate: 0.2, extinctionRate: 0.1, isPredator: false, isDomestic: false, isWild: true },
                { id: 2, name: "Крысы", type: "mammal", subtype: "rodent", icon: "fa-mouse", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 80, reward: { power: 40, energy: 20, mutation: 0 }, description: "Крупные грызуны, живущие в городах", cureRate: 0.18, extinctionRate: 0.12, isPredator: false, isDomestic: false, isWild: false },
                { id: 3, name: "Кошки", type: "mammal", subtype: "predator", icon: "fa-cat", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 120, reward: { power: 60, energy: 30, mutation: 0 }, description: "Домашние хищники, умеренная сложность", cureRate: 0.15, extinctionRate: 0.15, isPredator: true, isDomestic: true, isWild: false },
                { id: 4, name: "Собаки", type: "mammal", subtype: "predator", icon: "fa-dog", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 150, reward: { power: 75, energy: 40, mutation: 0 }, description: "Верные друзья человека, социальные", cureRate: 0.14, extinctionRate: 0.18, isPredator: true, isDomestic: true, isWild: false },
                { id: 5, name: "Коровы", type: "mammal", subtype: "herbivore", icon: "fa-cow", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 200, reward: { power: 100, energy: 50, mutation: 0 }, description: "Крупный рогатый скот, стадные", cureRate: 0.12, extinctionRate: 0.2, isPredator: false, isDomestic: true, isWild: false },
                { id: 6, name: "Лошади", type: "mammal", subtype: "herbivore", icon: "fa-horse", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 250, reward: { power: 125, energy: 60, mutation: 0 }, description: "Благородные животные, выносливые", cureRate: 0.1, extinctionRate: 0.22, isPredator: false, isDomestic: true, isWild: false },
                { id: 7, name: "Волки", type: "mammal", subtype: "predator", icon: "fa-paw", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 300, reward: { power: 150, energy: 75, mutation: 1 }, description: "Стайные хищники, умные и опасные", cureRate: 0.08, extinctionRate: 0.25, isPredator: true, isDomestic: false, isWild: true },
                { id: 8, name: "Медведи", type: "mammal", subtype: "predator", icon: "fa-paw", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 400, reward: { power: 200, energy: 100, mutation: 1 }, description: "Крупные хищники, одиночки", cureRate: 0.06, extinctionRate: 0.3, isPredator: true, isDomestic: false, isWild: true },
                { id: 9, name: "Обезьяны", type: "mammal", subtype: "primate", icon: "fa-paw", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 350, reward: { power: 175, energy: 85, mutation: 1 }, description: "Близкие родственники человека", cureRate: 0.07, extinctionRate: 0.28, isPredator: false, isDomestic: false, isWild: true },
                { id: 10, name: "Слоны", type: "mammal", subtype: "herbivore", icon: "fa-otter", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 500, reward: { power: 250, energy: 125, mutation: 2 }, description: "Гиганты животного мира, умные", cureRate: 0.05, extinctionRate: 0.35, isPredator: false, isDomestic: false, isWild: true },
                
                // Птицы (5 видов) - требуют мутацию 2
                { id: 11, name: "Воробьи", type: "bird", subtype: "small", icon: "fa-dove", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 100, reward: { power: 50, energy: 25, mutation: 0 }, description: "Мелкие птицы, обитают в городах", cureRate: 0.25, extinctionRate: 0.08, isPredator: false, isDomestic: false, isWild: false },
                { id: 12, name: "Голуби", type: "bird", subtype: "medium", icon: "fa-dove", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 180, reward: { power: 90, energy: 45, mutation: 0 }, description: "Городские птицы, разносчики болезней", cureRate: 0.22, extinctionRate: 0.1, isPredator: false, isDomestic: false, isWild: false },
                { id: 13, name: "Вороны", type: "bird", subtype: "predator", icon: "fa-crow", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 250, reward: { power: 125, energy: 60, mutation: 1 }, description: "Умные птицы, падальщики", cureRate: 0.18, extinctionRate: 0.15, isPredator: true, isDomestic: false, isWild: true },
                { id: 14, name: "Орлы", type: "bird", subtype: "predator", icon: "fa-dove", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 400, reward: { power: 200, energy: 100, mutation: 1 }, description: "Короли неба, хищные птицы", cureRate: 0.12, extinctionRate: 0.2, isPredator: true, isDomestic: false, isWild: true },
                { id: 15, name: "Пингвины", type: "bird", subtype: "special", icon: "fa-dove", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 300, reward: { power: 150, energy: 75, mutation: 1 }, description: "Полярные птицы, нелетающие", cureRate: 0.15, extinctionRate: 0.18, isPredator: false, isDomestic: false, isWild: true },
                
                // Водные виды (5 видов) - требуют мутацию 3
                { id: 16, name: "Золотые рыбки", type: "water", subtype: "fish", icon: "fa-fish", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 80, reward: { power: 40, energy: 20, mutation: 0 }, description: "Аквариумные рыбки, легкая добыча", cureRate: 0.3, extinctionRate: 0.05, isPredator: false, isDomestic: true, isWild: false },
                { id: 17, name: "Карпы", type: "water", subtype: "fish", icon: "fa-fish", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 150, reward: { power: 75, energy: 40, mutation: 0 }, description: "Пресноводные рыбы, обитают в прудах", cureRate: 0.25, extinctionRate: 0.1, isPredator: false, isDomestic: false, isWild: true },
                { id: 18, name: "Акулы", type: "water", subtype: "predator", icon: "fa-fish", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 600, reward: { power: 300, energy: 150, mutation: 2 }, description: "Морские хищники, опасные существа", cureRate: 0.08, extinctionRate: 0.3, isPredator: true, isDomestic: false, isWild: true },
                { id: 19, name: "Дельфины", type: "water", subtype: "mammal", icon: "fa-fish", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 500, reward: { power: 250, energy: 125, mutation: 2 }, description: "Умные морские млекопитающие", cureRate: 0.1, extinctionRate: 0.25, isPredator: true, isDomestic: false, isWild: true },
                { id: 20, name: "Киты", type: "water", subtype: "mammal", icon: "fa-fish", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 800, reward: { power: 400, energy: 200, mutation: 3 }, description: "Гиганты океана, мирные существа", cureRate: 0.06, extinctionRate: 0.35, isPredator: false, isDomestic: false, isWild: true },
                
                // Особые виды (5 видов) - требуют высокий уровень
                { id: 21, name: "Люди", type: "special", subtype: "human", icon: "fa-user-friends", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 1000, reward: { power: 500, energy: 250, mutation: 3 }, description: "Вершина эволюции, самый сложный вид", cureRate: 0.04, extinctionRate: 0.4, isPredator: true, isDomestic: false, isWild: false },
                { id: 22, name: "Динозавры", type: "special", subtype: "extinct", icon: "fa-dragon", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 1500, reward: { power: 750, energy: 375, mutation: 5 }, description: "Древние гиганты, вымершие виды", cureRate: 0.03, extinctionRate: 0.5, isPredator: true, isDomestic: false, isWild: true },
                { id: 23, name: "Мифические существа", type: "special", subtype: "mythical", icon: "fa-dragon", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 2000, reward: { power: 1000, energy: 500, mutation: 8 }, description: "Легендарные создания из мифов", cureRate: 0.02, extinctionRate: 0.6, isPredator: true, isDomestic: false, isWild: true },
                { id: 24, name: "Инопланетяне", type: "special", subtype: "alien", icon: "fa-user-astronaut", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 3000, reward: { power: 1500, energy: 750, mutation: 10 }, description: "Внеземные формы жизни", cureRate: 0.015, extinctionRate: 0.7, isPredator: true, isDomestic: false, isWild: true },
                { id: 25, name: "Боги", type: "special", subtype: "divine", icon: "fa-crown", infected: false, extinct: false, infectionProgress: 0, cureProgress: 0, requiredPower: 5000, reward: { power: 2500, energy: 1250, mutation: 15 }, description: "Верховные существа, конечная цель", cureRate: 0.01, extinctionRate: 0.8, isPredator: false, isDomestic: false, isWild: false }
            ],
            
            // Активное заражение
            activeInfections: [],
            
            // Статистика
            stats: {
                infectionSpeed: 0,
                cureSpeed: 0,
                extinctionBonus: 0,
                totalExtinctionBonus: 0
            }
        };

        // DOM элементы
        const virusPowerEl = document.getElementById('virus-power');
        const energyEl = document.getElementById('energy');
        const cellsEl = document.getElementById('cells');
        const mutationPointsEl = document.getElementById('mutation-points');
        const clickPowerEl = document.getElementById('click-power');
        const clickEnergyEl = document.getElementById('click-energy');
        const totalPowerEl = document.getElementById('total-power');
        const virusCellEl = document.getElementById('virus-cell');
        const notificationEl = document.getElementById('notification');
        const notificationTextEl = document.getElementById('notification-text');
        const totalInfectedEl = document.getElementById('total-infected');
        const infectedSpeciesEl = document.getElementById('infected-species');
        const extinctSpeciesEl = document.getElementById('extinct-species');
        const autoInfectEl = document.getElementById('auto-infect');
        const evolutionLevelEl = document.getElementById('evolution-level');
        const evolutionNameEl = document.getElementById('evolution-name');
        const evolutionProgressBar = document.getElementById('evolution-progress-bar');
        const cureResistanceValueEl = document.getElementById('cure-resistance-value');
        const cureResistanceBar = document.getElementById('cure-resistance-bar');
        const speciesUnderCureEl = document.getElementById('species-under-cure');
        const extinctionSpeedEl = document.getElementById('extinction-speed');
        const extinctionBonusEl = document.getElementById('extinction-bonus');
        const speciesCountEl = document.getElementById('species-count');

        // Инициализация игры
        function initGame() {
            updateUI();
            renderSpecies();
            setupEventListeners();
            
            // Запуск игрового цикла
            setInterval(gameLoop, 1000);
            
            showNotification("Вирусный менеджер: Эволюция и Мутации запущены! Заражайте виды и доводите их до вымирания для получения бонусов!");
        }

        // Игровой цикл
        function gameLoop() {
            // Автоматическое заражение клеток
            if (gameState.autoInfectRate > 0) {
                const cellsToInfect = gameState.autoInfectRate;
                gameState.cells += cellsToInfect;
                gameState.virusPower += cellsToInfect * gameState.clickPower;
                gameState.energy += cellsToInfect * gameState.clickEnergy;
                gameState.totalInfected += cellsToInfect;
            }
            
            // Обработка активных заражений
            processInfections();
            
            // Обработка лечения и вымирания
            processCureAndExtinction();
            
            // Обновление прогресса эволюции
            updateEvolution();
            
            updateUI();
        }

        // Обработка активных заражений видов
        function processInfections() {
            for (let i = gameState.activeInfections.length - 1; i >= 0; i--) {
                const infection = gameState.activeInfections[i];
                const species = gameState.species.find(s => s.id === infection.speciesId);
                
                if (!species || species.infected || species.extinct) {
                    gameState.activeInfections.splice(i, 1);
                    continue;
                }
                
                // Расчет скорости заражения с учетом всех бонусов
                let infectionSpeed = 0.5; // Базовая скорость
                
                // Бонусы от улучшений
                infectionSpeed += (gameState.upgrades[1].level * 0.05);
                infectionSpeed += (gameState.upgrades[2].level * 0.1);
                infectionSpeed += (gameState.upgrades[6].level * 0.25);
                
                // Бонусы от мутаций и адаптаций
                infectionSpeed = applySpeciesBonuses(species, infectionSpeed, 'infection');
                
                // Применение заражения
                species.infectionProgress += infectionSpeed;
                
                // Если заражение достигло 100%
                if (species.infectionProgress >= 100) {
                    species.infected = true;
                    species.infectionProgress = 100;
                    gameState.infectedSpeciesCount++;
                    gameState.activeInfections.splice(i, 1);
                    
                    showNotification(`Вид "${species.name}" полностью заражен! Начинается процесс вымирания...`);
                }
            }
        }

        // Обработка лечения и вымирания
        function processCureAndExtinction() {
            let speciesUnderCure = 0;
            let totalExtinctionSpeed = 0;
            
            gameState.species.forEach(species => {
                if (species.infected && !species.extinct) {
                    speciesUnderCure++;
                    
                    // Процесс лечения
                    let cureSpeed = species.cureRate;
                    
                    // Учет сопротивления лечению
                    cureSpeed *= (100 - gameState.cureResistance) / 100;
                    
                    // Бонусы от мутаций
                    cureSpeed = applySpeciesBonuses(species, cureSpeed, 'cure');
                    
                    species.cureProgress += cureSpeed;
                    
                    // Процесс вымирания (только если заражен на 100%)
                    if (species.infectionProgress >= 100) {
                        let extinctionSpeed = species.extinctionRate;
                        
                        // Бонусы от мутаций
                        extinctionSpeed = applySpeciesBonuses(species, extinctionSpeed, 'extinction');
                        
                        // Применяем бонус от вымирания
                        extinctionSpeed *= (1 + gameState.extinctionBonus / 100);
                        
                        // Увеличиваем прогресс вымирания
                        species.infectionProgress = Math.min(100, species.infectionProgress + extinctionSpeed);
                        totalExtinctionSpeed += extinctionSpeed;
                        
                        // Если вымирание достигло 100%
                        if (species.infectionProgress >= 100 && !species.extinct) {
                            makeSpeciesExtinct(species.id);
                        }
                    }
                    
                    // Если лечение достигло 100%
                    if (species.cureProgress >= 100 && !species.extinct) {
                        cureSpecies(species.id);
                    }
                }
            });
            
            gameState.stats.cureSpeed = speciesUnderCure;
            gameState.stats.extinctionSpeed = totalExtinctionSpeed;
        }

        // Применение бонусов к виду
        function applySpeciesBonuses(species, baseValue, type) {
            let multiplier = 1;
            
            // Мутации
            if (gameState.mutations[1].purchased && species.type === "mammal") {
                if (type === 'infection') multiplier += 0.5;
                if (type === 'cure') multiplier -= 0.3;
            }
            
            if (gameState.mutations[6].purchased) {
                if (type === 'extinction') multiplier += 1.0;
            }
            
            // Адаптации
            if (gameState.adaptations[1].purchased && species.isPredator) {
                if (type === 'infection') multiplier += 0.25;
            }
            
            if (gameState.adaptations[2].purchased && species.isDomestic) {
                if (type === 'infection') multiplier += 0.3;
            }
            
            if (gameState.adaptations[3].purchased && species.isWild) {
                if (type === 'infection') multiplier += 0.35;
            }
            
            if (gameState.adaptations[4].purchased && species.subtype === "human") {
                if (type === 'infection') multiplier += 0.5;
                if (type === 'cure') multiplier -= 0.4;
            }
            
            return baseValue * multiplier;
        }

        // Лечение вида
        function cureSpecies(speciesId) {
            const species = gameState.species.find(s => s.id === speciesId);
            
            if (!species || species.extinct) return;
            
            // Сброс прогресса
            species.infected = false;
            species.infectionProgress = 0;
            species.cureProgress = 0;
            gameState.infectedSpeciesCount--;
            
            showNotification(`Вид "${species.name}" вылечился от вируса! Все прогрессы сброшены.`);
        }

        // Вымирание вида
        function makeSpeciesExtinct(speciesId) {
            const species = gameState.species.find(s => s.id === speciesId);
            
            if (!species || species.extinct) return;
            
            // Отмечаем вид как вымерший
            species.extinct = true;
            species.infected = false;
            gameState.infectedSpeciesCount--;
            gameState.extinctSpeciesCount++;
            
            // Награда за вымирание
            const powerReward = species.reward.power * 2;
            const energyReward = species.reward.energy * 2;
            const mutationReward = species.reward.mutation + 1;
            
            gameState.virusPower += powerReward;
            gameState.energy += energyReward;
            gameState.mutationPoints += mutationReward;
            gameState.totalPower += powerReward;
            
            // Бонус за вымирание (увеличивается с каждым вымершим видом)
            gameState.extinctionBonus += 5;
            
            showNotification(`Вид "${species.name}" ВЫМЕР! +${powerReward} силы, +${energyReward} энергии, +${mutationReward} очков мутации!`);
        }

        // Обновление эволюции
        function updateEvolution() {
            // Прогресс эволюции зависит от вымерших видов и общей силы
            const baseProgress = gameState.extinctSpeciesCount * 10 + gameState.totalPower / 200;
            
            // Множители
            let multiplier = 1;
            if (gameState.upgrades[5].level > 0) {
                multiplier += gameState.upgrades[5].level * 0.2;
            }
            if (gameState.mutations[5].purchased) {
                multiplier += 0.5;
            }
            
            gameState.evolutionProgress += baseProgress * multiplier / 100;
            
            // Если прогресс достиг 100%, повышаем уровень эволюции
            if (gameState.evolutionProgress >= 100) {
                gameState.evolutionLevel++;
                gameState.evolutionProgress = 0;
                
                // Награда за эволюцию
                let mutationReward = 1;
                if (gameState.upgrades[5].level > 0) {
                    mutationReward += gameState.upgrades[5].level;
                }
                if (gameState.mutations[5].purchased) {
                    mutationReward += 2;
                }
                
                gameState.mutationPoints += mutationReward;
                
                // Обновление имени вируса
                const virusNames = [
                    "Примитивный вирус", "Базовый вирус", "Опасный вирус", 
                    "Угрожающий вирус", "Эпидемический вирус", "Пандемический вирус",
                    "Апокалиптический вирус", "Легендарный вирус", "Мифический вирус", 
                    "Божественный вирус", "Вселенская угроза", "Абсолютный патоген"
                ];
                
                const nameIndex = Math.min(virusNames.length - 1, gameState.evolutionLevel - 1);
                const virusName = virusNames[nameIndex];
                
                showNotification(`Вирус эволюционировал до уровня ${gameState.evolutionLevel}: ${virusName}! Получено ${mutationReward} очков мутации.`);
            }
        }

        // Обновление интерфейса
        function updateUI() {
            // Обновление ресурсов
            virusPowerEl.textContent = Math.floor(gameState.virusPower);
            energyEl.textContent = Math.floor(gameState.energy);
            cellsEl.textContent = Math.floor(gameState.cells);
            mutationPointsEl.textContent = gameState.mutationPoints;
            
            // Обновление мощности клика
            clickPowerEl.textContent = gameState.clickPower;
            clickEnergyEl.textContent = gameState.clickEnergy.toFixed(1);
            
            // Обновление общей силы
            totalPowerEl.textContent = Math.floor(gameState.totalPower);
            
            // Обновление статистики
            totalInfectedEl.textContent = Math.floor(gameState.totalInfected);
            infectedSpeciesEl.textContent = gameState.infectedSpeciesCount;
            extinctSpeciesEl.textContent = gameState.extinctSpeciesCount;
            autoInfectEl.textContent = gameState.autoInfectRate.toFixed(1) + "/сек";
            
            // Обновление эволюции
            evolutionLevelEl.textContent = gameState.evolutionLevel;
            
            // Обновление имени вируса
            const virusNames = [
                "Примитивный вирус", "Базовый вирус", "Опасный вирус", 
                "Угрожающий вирус", "Эпидемический вирус", "Пандемический вирус",
                "Апокалиптический вирус", "Легендарный вирус", "Мифический вирус", 
                "Божественный вирус", "Вселенская угроза", "Абсолютный патоген"
            ];
            
            const nameIndex = Math.min(virusNames.length - 1, gameState.evolutionLevel - 1);
            evolutionNameEl.textContent = virusNames[nameIndex];
            
            // Обновление прогресса эволюции
            evolutionProgressBar.style.width = gameState.evolutionProgress + "%";
            
            // Обновление статистики лечения
            cureResistanceValueEl.textContent = Math.floor(gameState.cureResistance) + "%";
            cureResistanceBar.style.width = gameState.cureResistance + "%";
            
            speciesUnderCureEl.textContent = gameState.stats.cureSpeed;
            extinctionSpeedEl.textContent = gameState.stats.extinctionSpeed.toFixed(2) + "%/сек";
            extinctionBonusEl.textContent = "+" + gameState.extinctionBonus + "%";
            
            // Обновление счетчика видов
            speciesCountEl.textContent = `Заражено: ${gameState.infectedSpeciesCount}/25 | Вымерло: ${gameState.extinctSpeciesCount}`;
            
            // Обновление улучшений
            updateUpgradesUI();
            
            // Обновление видов
            renderSpecies();
        }

        // Обновление улучшений
        function updateUpgradesUI() {
            // Обновление улучшений
            for (let i = 1; i <= 6; i++) {
                const upgrade = gameState.upgrades[i];
                const upgradeEl = document.getElementById(`upgrade${i}`);
                const costEl = upgradeEl.querySelector('.upgrade-cost');
                const progressBar = document.getElementById(`upgrade${i}-bar`);
                
                // Расчет текущей стоимости
                const currentCost = Math.floor(upgrade.cost * Math.pow(upgrade.costMultiplier, upgrade.level));
                
                // Обновление стоимости
                if (i === 3) {
                    costEl.textContent = `${currentCost} энергии`;
                } else {
                    costEl.textContent = `${currentCost} силы`;
                }
                
                // Обновление прогресса
                progressBar.style.width = `${(upgrade.level / upgrade.maxLevel) * 100}%`;
                
                // Проверка возможности покупки
                if ((i === 3 && gameState.energy >= currentCost) || (i !== 3 && gameState.virusPower >= currentCost)) {
                    upgradeEl.classList.remove('disabled');
                } else {
                    upgradeEl.classList.add('disabled');
                }
            }
            
            // Обновление мутаций
            for (let i = 1; i <= 6; i++) {
                const mutation = gameState.mutations[i];
                const mutationEl = document.getElementById(`mutation${i}`);
                const progressBar = document.getElementById(`mutation${i}-bar`);
                
                if (mutation.purchased) {
                    mutationEl.classList.add('unlocked');
                    mutationEl.classList.remove('disabled');
                    progressBar.style.width = "100%";
                } else {
                    // Проверка возможности покупки
                    if (gameState.mutationPoints >= mutation.cost) {
                        mutationEl.classList.remove('disabled');
                    } else {
                        mutationEl.classList.add('disabled');
                    }
                    progressBar.style.width = "0%";
                }
            }
            
            // Обновление адаптаций
            for (let i = 1; i <= 4; i++) {
                const adaptation = gameState.adaptations[i];
                const adaptationEl = document.getElementById(`adaptation${i}`);
                
                if (adaptation.purchased) {
                    adaptationEl.classList.add('unlocked');
                    adaptationEl.classList.remove('disabled');
                } else {
                    // Проверка возможности покупки
                    if (gameState.mutationPoints >= adaptation.cost) {
                        adaptationEl.classList.remove('disabled');
                    } else {
                        adaptationEl.classList.add('disabled');
                    }
                }
            }
        }

        // Покупка улучшения
        function buyUpgrade(upgradeId) {
            const upgrade = gameState.upgrades[upgradeId];
            const currentCost = Math.floor(upgrade.cost * Math.pow(upgrade.costMultiplier, upgrade.level));
            
            // Проверка максимального уровня
            if (upgrade.level >= upgrade.maxLevel) {
                showNotification(`Улучшение "${upgrade.name}" достигло максимального уровня!`);
                return;
            }
            
            // Проверка ресурсов
            if (upgradeId === 3) {
                // Улучшение за энергию
                if (gameState.energy < currentCost) {
                    showNotification(`Недостаточно энергии! Нужно ${currentCost} энергии.`);
                    return;
                }
                gameState.energy -= currentCost;
            } else {
                // Улучшение за силу
                if (gameState.virusPower < currentCost) {
                    showNotification(`Недостаточно силы вируса! Нужно ${currentCost} силы.`);
                    return;
                }
                gameState.virusPower -= currentCost;
            }
            
            // Применение улучшения
            upgrade.level++;
            
            // Применение эффектов
            if (upgradeId === 1) {
                gameState.clickPower += upgrade.effect.clickPower;
                showNotification(`Улучшение "${upgrade.name}" куплено! +${upgrade.effect.clickPower} силы за клик.`);
            } else if (upgradeId === 2) {
                gameState.autoInfectRate += upgrade.effect.autoInfect;
                showNotification(`Улучшение "${upgrade.name}" куплено! Автозаражение: ${gameState.autoInfectRate.toFixed(1)} клеток/сек.`);
            } else if (upgradeId === 3) {
                gameState.clickEnergy += upgrade.effect.clickEnergy;
                showNotification(`Улучшение "${upgrade.name}" куплено! +${upgrade.effect.clickEnergy} энергии за клик.`);
            } else if (upgradeId === 4) {
                gameState.cureResistance += upgrade.effect.cureResistance;
                showNotification(`Улучшение "${upgrade.name}" куплено! +${upgrade.effect.cureResistance}% сопротивления лечению.`);
            } else if (upgradeId === 6) {
                gameState.maxActiveInfections += upgrade.effect.maxInfections;
                showNotification(`Улучшение "${upgrade.name}" куплено! Теперь можно заражать ${gameState.maxActiveInfections} видов одновременно.`);
            } else {
                showNotification(`Улучшение "${upgrade.name}" куплено!`);
            }
            
            updateUI();
        }

        // Покупка мутации
        function buyMutation(mutationId) {
            const mutation = gameState.mutations[mutationId];
            
            // Проверка, куплена ли уже мутация
            if (mutation.purchased) {
                showNotification(`Мутация "${mutation.name}" уже приобретена!`);
                return;
            }
            
            // Проверка ресурсов
            if (gameState.mutationPoints < mutation.cost) {
                showNotification(`Недостаточно очков мутации! Нужно ${mutation.cost}.`);
                return;
            }
            
            // Списание ресурсов
            gameState.mutationPoints -= mutation.cost;
            
            // Применение мутации
            mutation.purchased = true;
            
            showNotification(`Мутация "${mutation.name}" приобретена!`);
            
            updateUI();
        }

        // Покупка адаптации
        function buyAdaptation(adaptationId) {
            const adaptation = gameState.adaptations[adaptationId];
            
            // Проверка, куплена ли уже адаптация
            if (adaptation.purchased) {
                showNotification(`Адаптация "${adaptation.name}" уже приобретена!`);
                return;
            }
            
            // Проверка ресурсов
            if (gameState.mutationPoints < adaptation.cost) {
                showNotification(`Недостаточно очков мутации! Нужно ${adaptation.cost}.`);
                return;
            }
            
            // Списание ресурсов
            gameState.mutationPoints -= adaptation.cost;
            
            // Применение адаптации
            adaptation.purchased = true;
            
            showNotification(`Адаптация "${adaptation.name}" приобретена!`);
            
            updateUI();
        }

        // Обработка клика по вирусу
        function handleVirusClick() {
            // Анимация клика
            virusCellEl.style.transform = 'scale(0.95)';
            setTimeout(() => {
                virusCellEl.style.transform = 'scale(1)';
            }, 100);
            
            // Начисление ресурсов
            gameState.virusPower += gameState.clickPower;
            gameState.energy += gameState.clickEnergy;
            gameState.cells += 0.1;
            gameState.totalInfected += 0.1;
            gameState.totalPower += gameState.clickPower;
            
            // Шанс получить очко мутации
            if (Math.random() < 0.01) {
                gameState.mutationPoints++;
                showNotification(`Случайная мутация! Получено 1 очко мутации.`);
            }
            
            updateUI();
        }

        // Рендер видов
        function renderSpecies() {
            // Очистка контейнеров
            const containers = ['all', 'mammals', 'birds', 'water', 'special'];
            containers.forEach(container => {
                const el = document.getElementById(`${container}-species`);
                if (el) el.innerHTML = '';
            });
            
            // Сортировка видов по категориям
            gameState.species.forEach(species => {
                const speciesEl = document.createElement('div');
                
                // Определяем, заблокирован ли вид
                let isLocked = false;
                let lockReason = "";
                
                // Проверка мутаций для доступа
                if (species.type === "bird" && !gameState.mutations[2].purchased) {
                    isLocked = true;
                    lockReason = "Требуется мутация 'Адаптация к птицам'";
                }
                
                if (species.type === "water" && !gameState.mutations[3].purchased) {
                    isLocked = true;
                    lockReason = "Требуется мутация 'Адаптация к водным видам'";
                }
                
                if (species.type === "special" && gameState.evolutionLevel < 5) {
                    isLocked = true;
                    lockReason = "Требуется 5 уровень эволюции";
                }
                
                if (species.requiredPower > gameState.totalPower) {
                    isLocked = true;
                    lockReason = `Требуется ${species.requiredPower} силы вируса`;
                }
                
                // Проверяем, заражается ли вид в данный момент
                const isInfecting = gameState.activeInfections.some(inf => inf.speciesId === species.id);
                
                // Проверяем, можно ли начать заражение (лимит активных заражений)
                const canInfect = !isLocked && !species.infected && !species.extinct && 
                                 !isInfecting && gameState.activeInfections.length < gameState.maxActiveInfections;
                
                let statusClass = '';
                let statusText = '';
                if (species.extinct) {
                    statusClass = 'extinct';
                    statusText = 'ВЫМЕР';
                } else if (species.infected) {
                    statusClass = 'infected';
                    statusText = 'ЗАРАЖЕН';
                }
                
                // Бонусы адаптации
                let adaptationBonus = '';
                if (gameState.adaptations[1].purchased && species.isPredator) {
                    adaptationBonus += '<div class="adaptation-bonus">+25% к хищникам</div>';
                }
                if (gameState.adaptations[2].purchased && species.isDomestic) {
                    adaptationBonus += '<div class="adaptation-bonus">+30% к домашним</div>';
                }
                if (gameState.adaptations[3].purchased && species.isWild) {
                    adaptationBonus += '<div class="adaptation-bonus">+35% к диким</div>';
                }
                if (gameState.adaptations[4].purchased && species.subtype === "human") {
                    adaptationBonus += '<div class="adaptation-bonus">+50% к людям</div>';
                }
                
                speciesEl.className = `species-item ${statusClass} ${isLocked ? 'locked' : ''}`;
                speciesEl.innerHTML = `
                    <div class="species-icon"><i class="fas ${species.icon}"></i></div>
                    <div class="species-name">${species.name}</div>
                    <div class="species-type">${species.type === 'mammal' ? 'Млекопитающее' : species.type === 'bird' ? 'Птица' : species.type === 'water' ? 'Водный вид' : 'Особый вид'}</div>
                    <div class="species-desc">${species.description}</div>
                    <div class="species-power">Требуется: ${species.requiredPower} силы</div>
                    ${adaptationBonus}
                    ${isLocked ? 
                        `<div style="color: #ff6b8b; font-size: 0.8rem; margin-bottom: 10px;">${lockReason}</div>` : 
                        ''
                    }
                    ${species.extinct ? 
                        `<div class="species-status status-extinct">${statusText}</div>
                         <div class="extinction-bonus">Бонус: +${species.reward.mutation + 1} очков мутации</div>` :
                    species.infected ? 
                        `<div class="species-status status-infected">${statusText}</div>` :
                    isInfecting ?
                        `<button class="species-btn infecting" disabled>Заражается... ${species.infectionProgress.toFixed(0)}%</button>` :
                        `<button class="species-btn" onclick="startInfection(${species.id})" ${canInfect ? '' : 'disabled'}>${canInfect ? 'Заразить' : 'Недоступно'}</button>`
                    }
                    ${!species.extinct ? 
                        `<div class="progress-container">
                            <div class="progress-label">
                                <span>${species.infected ? 'Вымирание' : 'Заражение'}</span>
                                <span>${species.infectionProgress.toFixed(0)}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="infection-progress-bar" style="width: ${species.infectionProgress}%"></div>
                            </div>
                            ${species.infected ? 
                                `<div class="progress-label">
                                    <span>Лечение</span>
                                    <span>${species.cureProgress.toFixed(0)}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="cure-progress-bar" style="width: ${species.cureProgress}%"></div>
                                </div>` : 
                                ''
                            }
                        </div>` : 
                        ''
                    }
                `;
                
                // Добавляем вид во все контейнеры, где он должен быть
                // Все виды
                const allContainer = document.getElementById('all-species');
                if (allContainer) allContainer.appendChild(speciesEl.cloneNode(true));
                
                // По типам
                if (species.type === "mammal") {
                    const container = document.getElementById('mammals-species');
                    if (container) container.appendChild(speciesEl.cloneNode(true));
                }
                if (species.type === "bird") {
                    const container = document.getElementById('birds-species');
                    if (container) container.appendChild(speciesEl.cloneNode(true));
                }
                if (species.type === "water") {
                    const container = document.getElementById('water-species');
                    if (container) container.appendChild(speciesEl.cloneNode(true));
                }
                if (species.type === "special") {
                    const container = document.getElementById('special-species');
                    if (container) container.appendChild(speciesEl.cloneNode(true));
                }
            });
        }

        // Начало заражения вида
        function startInfection(speciesId) {
            const species = gameState.species.find(s => s.id === speciesId);
            
            if (!species || species.infected || species.extinct) return;
            
            // Проверка лимита активных заражений
            if (gameState.activeInfections.length >= gameState.maxActiveInfections) {
                showNotification(`Достигнут лимит одновременного заражения! Максимум: ${gameState.maxActiveInfections}`);
                return;
            }
            
            // Проверка требований
            if (gameState.totalPower < species.requiredPower) {
                showNotification(`Недостаточно силы вируса! Требуется ${species.requiredPower} силы.`);
                return;
            }
            
            // Проверка специальных требований
            if (species.type === "bird" && !gameState.mutations[2].purchased) {
                showNotification(`Для заражения птиц требуется мутация "Адаптация к птицам"!`);
                return;
            }
            
            if (species.type === "water" && !gameState.mutations[3].purchased) {
                showNotification(`Для заражения водных видов требуется мутация "Адаптация к водным видам"!`);
                return;
            }
            
            if (species.type === "special" && gameState.evolutionLevel < 5) {
                showNotification(`Для заражения особых видов требуется 5 уровень эволюции!`);
                return;
            }
            
            // Добавление в активные заражения
            gameState.activeInfections.push({
                speciesId: speciesId,
                startTime: Date.now()
            });
            
            showNotification(`Начато заражение вида "${species.name}"!`);
            
            updateUI();
        }

        // Показать уведомление
        function showNotification(text) {
            notificationTextEl.textContent = text;
            notificationEl.classList.add('show');
            
            setTimeout(() => {
                notificationEl.classList.remove('show');
            }, 4000);
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            virusCellEl.addEventListener('click', handleVirusClick);
            
            // Табы
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Убрать активный класс со всех табов и контента
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Добавить активный класс текущему табу и контенту
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
        }

        // Запуск игры при загрузке страницы
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
