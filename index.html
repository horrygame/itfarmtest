<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Arena - –¢–∞–º–∞–≥–æ—á–∏ —Å –±–æ—è–º–∏</title>
    <style>
        :root {
            --primary: #7c3aed;
            --secondary: #a78bfa;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f8fafc;
            --background: #0f172a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--background);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            padding: 20px 0 40px;
        }
        
        .header h1 {
            font-size: 3rem;
            background: linear-gradient(135deg, #f59e0b, #ef4444, #7c3aed);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .header p {
            color: #94a3b8;
            font-size: 1.2rem;
        }
        
        .game-area {
            display: grid;
            grid-template-columns: 250px 1fr 250px;
            gap: 30px;
            min-height: 600px;
        }
        
        .stats-panel {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .stats-panel h3 {
            color: #a78bfa;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        .stat-item {
            margin-bottom: 20px;
        }
        
        .stat-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: #cbd5e1;
            font-size: 0.95rem;
        }
        
        .progress-bar {
            height: 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shine 2s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .stat-value {
            position: absolute;
            right: 10px;
            top: -2px;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        .pet-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .pet-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }
        
        .pet-avatar {
            font-size: 12rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
        }
        
        @keyframes float {
            0%, 100% { transform: translate(-50%, -50%) translateY(0); }
            50% { transform: translate(-50%, -50%) translateY(-20px); }
        }
        
        .pet-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 400px;
            border: 2px dashed rgba(124, 58, 237, 0.3);
            border-radius: 50%;
            z-index: 1;
        }
        
        .action-wheel {
            position: relative;
            width: 500px;
            height: 500px;
            margin: 0 auto;
        }
        
        .action-btn {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-origin: center;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .action-btn:hover {
            transform: scale(1.1) translateZ(0);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        .action-btn:nth-child(1) { top: 10%; left: 50%; transform: translateX(-50%); }
        .action-btn:nth-child(2) { top: 25%; right: 15%; }
        .action-btn:nth-child(3) { bottom: 25%; right: 15%; }
        .action-btn:nth-child(4) { bottom: 10%; left: 50%; transform: translateX(-50%); }
        .action-btn:nth-child(5) { bottom: 25%; left: 15%; }
        .action-btn:nth-child(6) { top: 25%; left: 15%; }
        .action-btn:nth-child(7) { top: 50%; left: 0; transform: translateY(-50%); }
        .action-btn:nth-child(8) { top: 50%; right: 0; transform: translateY(-50%); }
        
        .btn-feed { background: linear-gradient(135deg, #f59e0b, #fbbf24); }
        .btn-play { background: linear-gradient(135deg, #3b82f6, #60a5fa); }
        .btn-rest { background: linear-gradient(135deg, #8b5cf6, #a78bfa); }
        .btn-train { background: linear-gradient(135deg, #10b981, #34d399); }
        .btn-mutate { background: linear-gradient(135deg, #ec4899, #f472b6); }
        .btn-event { background: linear-gradient(135deg, #f59e0b, #f97316); }
        .btn-battle { background: linear-gradient(135deg, #ef4444, #f87171); }
        .btn-shop { background: linear-gradient(135deg, #06b6d4, #22d3ee); }
        
        .action-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
            opacity: 0.9;
        }
        
        .mutations-panel {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-height: 600px;
            overflow-y: auto;
        }
        
        .mutation-item {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        
        .mutation-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }
        
        .mutation-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        
        .mutation-emoji {
            font-size: 1.5rem;
        }
        
        .mutation-name {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .mutation-effect {
            font-size: 0.9rem;
            color: #cbd5e1;
            margin-bottom: 5px;
        }
        
        .mutation-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        
        .stat-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .stat-up { background: rgba(16, 185, 129, 0.2); color: #34d399; }
        .stat-down { background: rgba(239, 68, 68, 0.2); color: #f87171; }
        .stat-neutral { background: rgba(156, 163, 175, 0.2); color: #9ca3af; }
        
        .message-center {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            max-width: 90%;
            z-index: 1000;
        }
        
        .message-bubble {
            background: rgba(30, 41, 59, 0.95);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-left: 5px solid;
            animation: slideUp 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message-info { border-left-color: #3b82f6; }
        .message-success { border-left-color: #10b981; }
        .message-warning { border-left-color: #f59e0b; }
        .message-danger { border-left-color: #ef4444; }
        
        .event-banner {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 1001;
            animation: pulse 2s infinite, slideDown 0.5s ease;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
            text-align: center;
            max-width: 80%;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 2px solid rgba(124, 58, 237, 0.3);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        
        .modal-header {
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
            color: #a78bfa;
        }
        
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .inventory-item {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .inventory-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-5px);
        }
        
        .item-emoji {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .item-quantity {
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        .use-btn {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .use-btn:hover {
            transform: scale(1.05);
        }
        
        .battle-screen {
            text-align: center;
        }
        
        .battle-arena {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 40px 0;
        }
        
        .fighter {
            text-align: center;
            flex: 1;
        }
        
        .fighter-avatar {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        .fighter-stats {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .vs {
            font-size: 2rem;
            font-weight: bold;
            color: #f59e0b;
            padding: 0 40px;
        }
        
        .difficulty-btn {
            background: rgba(255,255,255,0.1);
            border: 2px solid;
            color: white;
            padding: 12px 25px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .difficulty-btn:hover {
            transform: translateY(-3px);
        }
        
        .easy { border-color: #10b981; }
        .medium { border-color: #f59e0b; }
        .hard { border-color: #ef4444; }
        
        .time-display {
            text-align: center;
            margin-top: 30px;
            font-size: 1.5rem;
            font-weight: bold;
            color: #a78bfa;
        }
        
        @media (max-width: 1200px) {
            .game-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .pet-container {
                width: 250px;
                height: 250px;
            }
            
            .action-wheel {
                width: 400px;
                height: 400px;
            }
            
            .action-btn {
                width: 70px;
                height: 70px;
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 768px) {
            .pet-container {
                width: 200px;
                height: 200px;
            }
            
            .action-wheel {
                width: 300px;
                height: 300px;
            }
            
            .action-btn {
                width: 60px;
                height: 60px;
                font-size: 1.3rem;
            }
            
            .action-label {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêâ Pet Arena</h1>
            <p>–ö—Ä—É–≥–æ–≤–∞—è –∞—Ä–µ–Ω–∞ —Å –ø–∏—Ç–æ–º—Ü–µ–º –≤ —Ü–µ–Ω—Ç—Ä–µ</p>
        </div>
        
        <div class="game-area">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - —Å—Ç–∞—Ç—ã -->
            <div class="stats-panel">
                <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                
                <div class="stat-item">
                    <div class="stat-label">
                        <span>‚è±Ô∏è –í—Ä–µ–º—è</span>
                        <span id="time-value">30:00</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="time-bar" style="width: 100%; background: linear-gradient(90deg, #7c3aed, #a78bfa);">
                            <div class="stat-value" id="time-percent">100%</div>
                        </div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-label">
                        <span>üí∞ –ú–æ–Ω–µ—Ç—ã</span>
                        <span id="coins-value">100</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="coins-bar" style="width: 100%; background: linear-gradient(90deg, #f59e0b, #fbbf24);">
                            <div class="stat-value">100%</div>
                        </div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-label">
                        <span>‚≠ê –£—Ä–æ–≤–µ–Ω—å</span>
                        <span id="level-value">1</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="exp-bar" style="width: 0%; background: linear-gradient(90deg, #10b981, #34d399);">
                            <div class="stat-value" id="exp-percent">0%</div>
                        </div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-label">
                        <span>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</span>
                        <span id="health-value">100</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="health-bar" style="width: 100%; background: linear-gradient(90deg, #ef4444, #f87171);"></div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-label">
                        <span>üçñ –ì–æ–ª–æ–¥</span>
                        <span id="hunger-value">50</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="hunger-bar" style="width: 50%; background: linear-gradient(90deg, #f59e0b, #fbbf24);"></div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-label">
                        <span>‚ö° –≠–Ω–µ—Ä–≥–∏—è</span>
                        <span id="energy-value">80</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="energy-bar" style="width: 80%; background: linear-gradient(90deg, #3b82f6, #60a5fa);"></div>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-label">
                        <span>üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</span>
                        <span id="mood-value">70</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="mood-bar" style="width: 70%; background: linear-gradient(90deg, #8b5cf6, #a78bfa);"></div>
                    </div>
                </div>
            </div>
            
            <!-- –¶–µ–Ω—Ç—Ä - –ø–∏—Ç–æ–º–µ—Ü –∏ –∫–Ω–æ–ø–∫–∏ -->
            <div class="pet-center">
                <div class="pet-container">
                    <div class="pet-ring"></div>
                    <div class="pet-avatar" id="pet-avatar">üê≤</div>
                </div>
                
                <div class="action-wheel">
                    <button class="action-btn btn-feed" onclick="feedPet()">
                        üçé
                        <div class="action-label">–ü–æ–∫–æ—Ä–º–∏—Ç—å</div>
                    </button>
                    
                    <button class="action-btn btn-play" onclick="playWithPet()">
                        üéÆ
                        <div class="action-label">–ü–æ–∏–≥—Ä–∞—Ç—å</div>
                    </button>
                    
                    <button class="action-btn btn-rest" onclick="restPet()">
                        üí§
                        <div class="action-label">–û—Ç–¥–æ—Ö–Ω—É—Ç—å</div>
                    </button>
                    
                    <button class="action-btn btn-train" onclick="trainPet()">
                        üèãÔ∏è
                        <div class="action-label">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å</div>
                    </button>
                    
                    <button class="action-btn btn-mutate" onclick="mutatePet()">
                        üß¨
                        <div class="action-label">–ú—É—Ç–∏—Ä–æ–≤–∞—Ç—å</div>
                    </button>
                    
                    <button class="action-btn btn-event" onclick="triggerEvent()">
                        üé≤
                        <div class="action-label">–°–æ–±—ã—Ç–∏–µ</div>
                    </button>
                    
                    <button class="action-btn btn-battle" onclick="showBattleModal()">
                        ‚öîÔ∏è
                        <div class="action-label">–ë–æ–π</div>
                    </button>
                    
                    <button class="action-btn btn-shop" onclick="showShopModal()">
                        üè™
                        <div class="action-label">–ú–∞–≥–∞–∑–∏–Ω</div>
                    </button>
                </div>
                
                <div class="time-display">
                    <div id="game-timer">30:00</div>
                    <div style="font-size: 1rem; color: #94a3b8; margin-top: 5px;">–ü—Ä–æ–≥—Ä–µ—Å—Å: <span id="progress-text">0%</span></div>
                </div>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –º—É—Ç–∞—Ü–∏–∏ -->
            <div class="mutations-panel">
                <h3>üß¨ –ú—É—Ç–∞—Ü–∏–∏</h3>
                <div id="mutations-list">
                    <div style="color: #94a3b8; text-align: center; padding: 20px;">
                        –ú—É—Ç–∞—Ü–∏–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –¶–µ–Ω—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π -->
    <div class="message-center" id="message-center"></div>
    
    <!-- –ë–∞–Ω–Ω–µ—Ä —Å–æ–±—ã—Ç–∏—è -->
    <div class="event-banner" id="event-banner" style="display: none;"></div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="shop-modal" style="display: none;">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('shop-modal')">√ó</button>
            <h2 class="modal-header">üè™ –ú–∞–≥–∞–∑–∏–Ω</h2>
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 1.5rem; color: #f59e0b;">üí∞ <span id="modal-coins">100</span> –º–æ–Ω–µ—Ç</div>
            </div>
            <div class="inventory-grid" id="shop-items">
                <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>
    
    <div class="modal" id="inventory-modal" style="display: none;">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('inventory-modal')">√ó</button>
            <h2 class="modal-header">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
            <div class="inventory-grid" id="inventory-items">
                <!-- –ü—Ä–µ–¥–º–µ—Ç—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>
    
    <div class="modal" id="battle-modal" style="display: none;">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('battle-modal')">√ó</button>
            <h2 class="modal-header">‚öîÔ∏è –ê—Ä–µ–Ω–∞ –±–∏—Ç–≤</h2>
            
            <div class="battle-arena">
                <div class="fighter">
                    <div class="fighter-avatar" id="player-avatar">üê≤</div>
                    <div class="fighter-name" id="player-name" style="font-weight: bold; font-size: 1.2rem;">–î—Ä–∞–∫–æ—à–∞</div>
                    <div class="fighter-stats">
                        <div>‚öîÔ∏è –ê—Ç–∞–∫–∞: <span id="player-attack">15</span></div>
                        <div>üõ°Ô∏è –ó–∞—â–∏—Ç–∞: <span id="player-defense">8</span></div>
                        <div>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <span id="player-health">100</span></div>
                    </div>
                </div>
                
                <div class="vs">VS</div>
                
                <div class="fighter">
                    <div class="fighter-avatar" id="enemy-avatar">ü§ñ</div>
                    <div class="fighter-name" id="enemy-name" style="font-weight: bold; font-size: 1.2rem;">–ñ–µ–ª–µ–∑–Ω—ã–π —Å—Ç—Ä–∞–∂</div>
                    <div class="fighter-stats">
                        <div>‚öîÔ∏è –ê—Ç–∞–∫–∞: <span id="enemy-attack">12</span></div>
                        <div>üõ°Ô∏è –ó–∞—â–∏—Ç–∞: <span id="enemy-defense">10</span></div>
                        <div>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <span id="enemy-health">80</span></div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <button class="difficulty-btn easy" onclick="startBattle('easy')">ü§ñ –õ–µ–≥–∫–∏–π</button>
                <button class="difficulty-btn medium" onclick="startBattle('medium')">‚öîÔ∏è –°—Ä–µ–¥–Ω–∏–π</button>
                <button class="difficulty-btn hard" onclick="startBattle('hard')">üëπ –°–ª–æ–∂–Ω—ã–π</button>
            </div>
            
            <div style="background: rgba(255,255,255,0.05); border-radius: 15px; padding: 20px; max-height: 200px; overflow-y: auto;" id="battle-log">
                <!-- –õ–æ–≥ –±–æ—è –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        let game = {
            time: 30 * 60,
            coins: 100,
            level: 1,
            exp: 0,
            expNeeded: 100,
            mutations: [],
            
            pet: {
                name: "–î—Ä–∞–∫–æ—à–∞",
                avatar: "üê≤",
                health: 100,
                maxHealth: 100,
                hunger: 50,
                energy: 80,
                mood: 70,
                attack: 15,
                defense: 8,
                speed: 12
            },
            
            inventory: [
                { id: 1, name: "–ú–æ—Ä–∫–æ–≤—å", emoji: "ü•ï", type: "food", quantity: 5, effect: { hunger: 30, mood: 5 } },
                { id: 2, name: "–Ø–±–ª–æ–∫–æ", emoji: "üçé", type: "food", quantity: 3, effect: { hunger: 50, mood: 10 } },
                { id: 3, name: "–°–µ–º–µ–Ω–∞", emoji: "üå±", type: "seed", quantity: 3, effect: { plant: true } }
            ],
            
            shop: [
                { id: 1, name: "–ú–æ—Ä–∫–æ–≤—å", emoji: "ü•ï", price: 5, effect: "–ì–æ–ª–æ–¥ +30%" },
                { id: 2, name: "–Ø–±–ª–æ–∫–æ", emoji: "üçé", price: 10, effect: "–ì–æ–ª–æ–¥ +50%, –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ +10%" },
                { id: 3, name: "–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫", emoji: "ü•§", price: 15, effect: "–≠–Ω–µ—Ä–≥–∏—è +40%" },
                { id: 4, name: "–ò–≥—Ä—É—à–∫–∞", emoji: "üß∏", price: 20, effect: "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ +30%" },
                { id: 5, name: "–°–µ–º–µ–Ω–∞", emoji: "üå±", price: 10, effect: "–î–ª—è –ø–æ—Å–∞–¥–∫–∏" },
                { id: 6, name: "–õ–µ—á–µ–±–Ω–æ–µ –∑–µ–ª—å–µ", emoji: "üß™", price: 30, effect: "–ó–¥–æ—Ä–æ–≤—å–µ +50%" },
                { id: 7, name: "–°—É–ø–µ—Ä-–µ–¥–∞", emoji: "üçî", price: 40, effect: "–ì–æ–ª–æ–¥ +100%, –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ +20%" },
                { id: 8, name: "–ú—É—Ç–∞–≥–µ–Ω", emoji: "üß¨", price: 50, effect: "–ù–æ–≤–∞—è –º—É—Ç–∞—Ü–∏—è" }
            ],
            
            mutationsList: [
                { 
                    id: 1, 
                    name: "–û–≥–Ω–µ–Ω–Ω–∞—è —á–µ—à—É—è", 
                    emoji: "üî•", 
                    type: "positive",
                    effect: "+25% –∫ –∞—Ç–∞–∫–µ, +15% –∫ –∑–∞—â–∏—Ç–µ",
                    stats: { attack: 0.25, defense: 0.15 }
                },
                { 
                    id: 2, 
                    name: "–õ–µ–¥—è–Ω–æ–π –≤–∑–≥–ª—è–¥", 
                    emoji: "‚ùÑÔ∏è", 
                    type: "positive",
                    effect: "+20% –∫ –∞—Ç–∞–∫–µ, +30% –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏",
                    stats: { attack: 0.20, speed: 0.30 }
                },
                { 
                    id: 3, 
                    name: "–ö–æ–ª—é—á–∞—è –±—Ä–æ–Ω—è", 
                    emoji: "ü¶î", 
                    type: "positive",
                    effect: "+40% –∫ –∑–∞—â–∏—Ç–µ",
                    stats: { defense: 0.40 }
                },
                { 
                    id: 4, 
                    name: "–ë—ã—Å—Ç—Ä—ã–µ –ª–∞–ø—ã", 
                    emoji: "‚ö°", 
                    type: "positive",
                    effect: "+50% –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏",
                    stats: { speed: 0.50 }
                },
                { 
                    id: 5, 
                    name: "–°–ª–∞–±–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ", 
                    emoji: "ü§í", 
                    type: "negative",
                    effect: "-20% –∫ –º–∞–∫—Å. –∑–¥–æ—Ä–æ–≤—å—é",
                    stats: { maxHealth: -0.20 }
                },
                { 
                    id: 6, 
                    name: "–ú–µ–¥–ª–µ–Ω–Ω—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º", 
                    emoji: "üêå", 
                    type: "negative",
                    effect: "–ì–æ–ª–æ–¥ —Ä–∞—Å—Ç—ë—Ç –Ω–∞ 100% –±—ã—Å—Ç—Ä–µ–µ",
                    stats: { hungerRate: 2.0 }
                },
                { 
                    id: 7, 
                    name: "–†–∞–¥—É–∂–Ω–∞—è –∫–æ–∂–∞", 
                    emoji: "üåà", 
                    type: "neutral",
                    effect: "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ 50% –±—ã—Å—Ç—Ä–µ–µ",
                    stats: { moodRate: 1.5 }
                },
                { 
                    id: 8, 
                    name: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞—É—Ä–∞", 
                    emoji: "üí´", 
                    type: "neutral",
                    effect: "–®–∞–Ω—Å 10% –æ–≥–ª—É—à–∏—Ç—å –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞",
                    stats: { stunChance: 0.10 }
                }
            ],
            
            events: [
                {
                    type: "good",
                    message: "üéÅ –í—ã –Ω–∞—à–ª–∏ —Å—É–Ω–¥—É–∫ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏!",
                    effect: () => {
                        game.coins += Math.floor(Math.random() * 30) + 20;
                        addMessage(`–ù–∞–π–¥–µ–Ω–æ ${game.coins} –º–æ–Ω–µ—Ç!`, "success");
                    }
                },
                {
                    type: "good",
                    message: "üçÄ –í–∞–º –ø–æ–≤–µ–∑–ª–æ! –ü–∏—Ç–æ–º–µ—Ü –Ω–∞—à—ë–ª –≤–∫—É—Å–Ω—É—é –µ–¥—É",
                    effect: () => {
                        game.inventory.push({
                            id: Date.now(),
                            name: "–í–∫—É—Å–Ω–∞—è –µ–¥–∞",
                            emoji: "üçñ",
                            type: "food",
                            quantity: 1,
                            effect: { hunger: 70, mood: 15 }
                        });
                        addMessage("–ü–æ–ª—É—á–µ–Ω–∞ –≤–∫—É—Å–Ω–∞—è –µ–¥–∞!", "success");
                    }
                },
                {
                    type: "good",
                    message: "üí´ –ü—Ä–æ–∏–∑–æ—à–ª–∞ —Å–ø–æ–Ω—Ç–∞–Ω–Ω–∞—è –º—É—Ç–∞—Ü–∏—è!",
                    effect: addRandomMutation
                },
                {
                    type: "bad",
                    message: "üí¢ –ü–∏—Ç–æ–º–µ—Ü –ø—Ä–æ—Å—Ç—É–¥–∏–ª—Å—è!",
                    effect: () => {
                        game.pet.health -= Math.floor(Math.random() * 20) + 10;
                        if (game.pet.health < 0) game.pet.health = 1;
                        addMessage(`–ó–¥–æ—Ä–æ–≤—å–µ -${Math.floor(game.pet.health)}`, "danger");
                    }
                },
                {
                    type: "bad",
                    message: "üò¥ –ü–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª!",
                    effect: () => {
                        game.pet.energy -= Math.floor(Math.random() * 40) + 20;
                        if (game.pet.energy < 0) game.pet.energy = 0;
                        addMessage(`–≠–Ω–µ—Ä–≥–∏—è -${Math.floor(game.pet.energy)}`, "warning");
                    }
                },
                {
                    type: "neutral",
                    message: "üåÄ –ü—Ä–æ–∏–∑–æ—à–ª–∞ —Å—Ç—Ä–∞–Ω–Ω–∞—è –º—É—Ç–∞—Ü–∏—è...",
                    effect: addRandomMutation
                }
            ]
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            updateDisplay();
            startGameTimer();
            updateShopItems();
            updateInventoryItems();
            updateMutationsList();
            
            // –°–ª—É—á–∞–π–Ω–æ–µ –∏–º—è –∏ –∞–≤–∞—Ç–∞—Ä
            const names = ["–î—Ä–∞–∫–æ—à–∞", "–û–≥–Ω–µ–≥—Ä–∏–≤", "–ò—Å–∫–æ—Ä–∫–∞", "–ó–º–µ—é–∫–∞", "–ü—É—à–∏—Å—Ç–∏–∫", "–ì—Ä–æ–∑–æ–≤–∏–∫"];
            const avatars = ["üê≤", "üêâ", "ü¶é", "ü¶ñ", "üêä", "ü¶ï"];
            game.pet.name = names[Math.floor(Math.random() * names.length)];
            game.pet.avatar = avatars[Math.floor(Math.random() * avatars.length)];
            
            addMessage(`üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${game.pet.name}! –£ –≤–∞—Å –µ—Å—Ç—å 30 –º–∏–Ω—É—Ç.`, "info");
            
            // –ü–µ—Ä–≤–∞—è –º—É—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É
            setTimeout(() => addRandomMutation(), 60000);
        }

        // –¢–∞–π–º–µ—Ä –∏–≥—Ä—ã
        function startGameTimer() {
            setInterval(() => {
                game.time--;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
                const minutes = Math.floor(game.time / 60);
                const seconds = game.time % 60;
                const timeStr = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                document.getElementById('game-timer').textContent = timeStr;
                document.getElementById('time-value').textContent = timeStr;
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å
                const progress = 100 - (game.time / (30 * 60)) * 100;
                document.getElementById('time-bar').style.width = progress + '%';
                document.getElementById('time-percent').textContent = Math.round(progress) + '%';
                document.getElementById('progress-text').textContent = Math.round(progress) + '%';
                
                // –ü–∞—Å—Å–∏–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
                if (game.time % 30 === 0) {
                    updatePassiveStats();
                }
                
                // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
                if (game.time <= 0) {
                    endGame();
                }
            }, 1000);
        }

        // –ü–∞—Å—Å–∏–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        function updatePassiveStats() {
            game.pet.hunger = Math.max(0, game.pet.hunger - 3);
            game.pet.energy = Math.min(100, game.pet.energy + 2);
            game.pet.mood = Math.max(0, game.pet.mood - 2);
            
            if (game.pet.hunger < 20) {
                game.pet.health = Math.max(1, game.pet.health - 1);
            }
            
            if (Math.random() < 0.05) {
                triggerRandomEvent();
            }
            
            updateDisplay();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateDisplay() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
            document.getElementById('coins-value').textContent = game.coins;
            document.getElementById('level-value').textContent = game.level;
            document.getElementById('health-value').textContent = Math.round(game.pet.health);
            document.getElementById('hunger-value').textContent = Math.round(game.pet.hunger);
            document.getElementById('energy-value').textContent = Math.round(game.pet.energy);
            document.getElementById('mood-value').textContent = Math.round(game.pet.mood);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
            document.getElementById('coins-bar').style.width = Math.min(100, game.coins / 200 * 100) + '%';
            document.getElementById('health-bar').style.width = (game.pet.health / game.pet.maxHealth * 100) + '%';
            document.getElementById('hunger-bar').style.width = game.pet.hunger + '%';
            document.getElementById('energy-bar').style.width = game.pet.energy + '%';
            document.getElementById('mood-bar').style.width = game.pet.mood + '%';
            
            // –û–ø—ã—Ç
            const expPercent = (game.exp / game.expNeeded * 100);
            document.getElementById('exp-bar').style.width = expPercent + '%';
            document.getElementById('exp-percent').textContent = Math.round(expPercent) + '%';
            
            // –ê–≤–∞—Ç–∞—Ä –ø–∏—Ç–æ–º—Ü–∞
            document.getElementById('pet-avatar').textContent = game.pet.avatar;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        function addMessage(text, type = "info") {
            const center = document.getElementById('message-center');
            const message = document.createElement('div');
            message.className = `message-bubble message-${type}`;
            message.textContent = text;
            message.style.animation = 'slideUp 0.3s ease';
            
            center.appendChild(message);
            
            // –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
            const messages = center.querySelectorAll('.message-bubble');
            if (messages.length > 3) {
                messages[0].remove();
            }
            
            // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (message.parentNode) {
                    message.style.opacity = '0';
                    message.style.transform = 'translateY(-20px)';
                    setTimeout(() => message.remove(), 300);
                }
            }, 5000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–Ω–Ω–µ—Ä —Å–æ–±—ã—Ç–∏—è
        function showEventBanner(text) {
            const banner = document.getElementById('event-banner');
            banner.textContent = text;
            banner.style.display = 'block';
            
            setTimeout(() => {
                banner.style.opacity = '0';
                banner.style.transform = 'translateX(-50%) translateY(-50px)';
                setTimeout(() => {
                    banner.style.display = 'none';
                    banner.style.opacity = '1';
                    banner.style.transform = 'translateX(-50%) translateY(0)';
                }, 500);
            }, 3000);
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Ç–æ–º—Ü–µ–º
        function feedPet() {
            const food = game.inventory.find(item => item.type === 'food');
            if (!food || food.quantity <= 0) {
                addMessage("‚ùå –ù–µ—Ç –µ–¥—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ!", "danger");
                return;
            }
            
            food.quantity--;
            if (food.quantity <= 0) {
                game.inventory = game.inventory.filter(i => i !== food);
            }
            
            const effect = food.effect || { hunger: 30 };
            game.pet.hunger = Math.min(100, game.pet.hunger + (effect.hunger || 0));
            game.pet.mood = Math.min(100, game.pet.mood + (effect.mood || 0));
            
            addMessage(`üçé –ü–æ–∫–æ—Ä–º–∏–ª–∏ ${food.name}! –ì–æ–ª–æ–¥ +${effect.hunger || 30}%`, "success");
            updateDisplay();
            updateInventoryItems();
        }

        function playWithPet() {
            if (game.pet.energy < 20) {
                addMessage("‚ùå –ü–∏—Ç–æ–º–µ—Ü —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –∏–≥—Ä!", "danger");
                return;
            }
            
            game.pet.energy = Math.max(0, game.pet.energy - 15);
            game.pet.mood = Math.min(100, game.pet.mood + 20);
            
            addMessage("üéÆ –ü–æ–∏–≥—Ä–∞–ª–∏ —Å –ø–∏—Ç–æ–º—Ü–µ–º! –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ +20%", "success");
            updateDisplay();
        }

        function restPet() {
            game.pet.energy = Math.min(100, game.pet.energy + 40);
            game.pet.hunger = Math.max(0, game.pet.hunger - 10);
            
            addMessage("üí§ –ü–∏—Ç–æ–º–µ—Ü –æ—Ç–¥–æ—Ö–Ω—É–ª! –≠–Ω–µ—Ä–≥–∏—è +40%", "success");
            updateDisplay();
        }

        function trainPet() {
            if (game.pet.energy < 30) {
                addMessage("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏!", "danger");
                return;
            }
            
            game.pet.energy = Math.max(0, game.pet.energy - 25);
            
            // –£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∞—Ç–æ–≤
            if (Math.random() > 0.5) {
                game.pet.attack += Math.random() * 2 + 1;
                addMessage(`‚öîÔ∏è –ê—Ç–∞–∫–∞ —É–ª—É—á—à–µ–Ω–∞! –¢–µ–ø–µ—Ä—å: ${game.pet.attack.toFixed(1)}`, "success");
            } else {
                game.pet.defense += Math.random() * 1.5 + 0.5;
                addMessage(`üõ°Ô∏è –ó–∞—â–∏—Ç–∞ —É–ª—É—á—à–µ–Ω–∞! –¢–µ–ø–µ—Ä—å: ${game.pet.defense.toFixed(1)}`, "success");
            }
            
            game.exp += Math.floor(Math.random() * 15) + 10;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è
            if (game.exp >= game.expNeeded) {
                game.level++;
                game.exp = 0;
                game.expNeeded = game.level * 150;
                game.pet.maxHealth += 25;
                game.pet.health = game.pet.maxHealth;
                
                addMessage(`üéâ –£—Ä–æ–≤–µ–Ω—å ${game.level}! –ó–¥–æ—Ä–æ–≤—å–µ +25`, "success");
                showEventBanner(`üéâ –î–æ—Å—Ç–∏–≥–Ω—É—Ç —É—Ä–æ–≤–µ–Ω—å ${game.level}!`);
            }
            
            updateDisplay();
        }

        // –ú—É—Ç–∞—Ü–∏–∏
        function mutatePet() {
            if (game.coins < 50) {
                addMessage("‚ùå –ù—É–∂–Ω–æ 50 –º–æ–Ω–µ—Ç –¥–ª—è –º—É—Ç–∞—Ü–∏–∏!", "danger");
                return;
            }
            
            game.coins -= 50;
            addRandomMutation();
            addMessage("üß¨ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –º—É—Ç–∞—Ü–∏—è –∑–∞ 50 –º–æ–Ω–µ—Ç", "info");
            updateDisplay();
        }

        function addRandomMutation() {
            const available = game.mutationsList.filter(m => 
                !game.mutations.some(gm => gm.id === m.id)
            );
            
            if (available.length === 0) {
                addMessage("‚ùå –í—Å–µ –º—É—Ç–∞—Ü–∏–∏ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!", "warning");
                return;
            }
            
            const mutation = available[Math.floor(Math.random() * available.length)];
            game.mutations.push(mutation);
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
            if (mutation.stats.attack) game.pet.attack *= (1 + mutation.stats.attack);
            if (mutation.stats.defense) game.pet.defense *= (1 + mutation.stats.defense);
            if (mutation.stats.speed) game.pet.speed *= (1 + mutation.stats.speed);
            if (mutation.stats.maxHealth) game.pet.maxHealth *= (1 + mutation.stats.maxHealth);
            
            addMessage(`üß¨ –ù–æ–≤–∞—è –º—É—Ç–∞—Ü–∏—è: ${mutation.emoji} ${mutation.name}`, "info");
            showEventBanner(`üß¨ ${mutation.name}: ${mutation.effect}`);
            
            updateMutationsList();
            updateDisplay();
        }

        function updateMutationsList() {
            const list = document.getElementById('mutations-list');
            list.innerHTML = '';
            
            if (game.mutations.length === 0) {
                list.innerHTML = '<div style="color: #94a3b8; text-align: center; padding: 20px;">–ú—É—Ç–∞—Ü–∏–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã</div>';
                return;
            }
            
            game.mutations.forEach(mutation => {
                const item = document.createElement('div');
                item.className = 'mutation-item';
                item.style.borderLeftColor = mutation.type === 'positive' ? '#10b981' : 
                                          mutation.type === 'negative' ? '#ef4444' : '#94a3b8';
                
                item.innerHTML = `
                    <div class="mutation-header">
                        <div class="mutation-emoji">${mutation.emoji}</div>
                        <div class="mutation-name">${mutation.name}</div>
                    </div>
                    <div class="mutation-effect">${mutation.effect}</div>
                    <div class="mutation-stats">
                        ${Object.entries(mutation.stats || {}).map(([stat, value]) => `
                            <div class="stat-badge ${value > 0 ? 'stat-up' : value < 0 ? 'stat-down' : 'stat-neutral'}">
                                ${stat}: ${value > 0 ? '+' : ''}${(value * 100).toFixed(0)}%
                            </div>
                        `).join('')}
                    </div>
                `;
                
                list.appendChild(item);
            });
        }

        // –°–æ–±—ã—Ç–∏—è
        function triggerEvent() {
            if (game.coins < 30) {
                addMessage("‚ùå –ù—É–∂–Ω–æ 30 –º–æ–Ω–µ—Ç –¥–ª—è —Å–æ–±—ã—Ç–∏—è!", "danger");
                return;
            }
            
            game.coins -= 30;
            triggerRandomEvent();
            updateDisplay();
        }

        function triggerRandomEvent() {
            const event = game.events[Math.floor(Math.random() * game.events.length)];
            event.effect();
            addMessage(event.message, event.type === 'good' ? 'success' : event.type === 'bad' ? 'danger' : 'warning');
            showEventBanner(event.message);
        }

        // –ú–∞–≥–∞–∑–∏–Ω
        function showShopModal() {
            document.getElementById('modal-coins').textContent = game.coins;
            updateShopItems();
            document.getElementById('shop-modal').style.display = 'flex';
        }

        function updateShopItems() {
            const container = document.getElementById('shop-items');
            container.innerHTML = '';
            
            game.shop.forEach(item => {
                const div = document.createElement('div');
                div.className = 'inventory-item';
                div.innerHTML = `
                    <div class="item-emoji">${item.emoji}</div>
                    <div class="item-name">${item.name}</div>
                    <div style="color: #94a3b8; font-size: 0.9rem; margin: 5px 0;">${item.effect}</div>
                    <div style="color: #f59e0b; font-weight: bold; margin: 5px 0;">${item.price} –º–æ–Ω–µ—Ç</div>
                    <button class="use-btn" onclick="buyItem(${item.id})" ${game.coins < item.price ? 'disabled' : ''}>
                        –ö—É–ø–∏—Ç—å
                    </button>
                `;
                container.appendChild(div);
            });
        }

        function buyItem(itemId) {
            const item = game.shop.find(i => i.id === itemId);
            if (!item) return;
            
            if (game.coins < item.price) {
                addMessage("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!", "danger");
                return;
            }
            
            game.coins -= item.price;
            
            // –û—Å–æ–±—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
            if (item.name === "–ú—É—Ç–∞–≥–µ–Ω") {
                addRandomMutation();
            } else if (item.name === "–°–µ–º–µ–Ω–∞") {
                game.inventory.push({
                    id: Date.now(),
                    name: item.name,
                    emoji: item.emoji,
                    type: "seed",
                    quantity: 1,
                    effect: { plant: true }
                });
            } else {
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                const existing = game.inventory.find(i => i.name === item.name);
                if (existing) {
                    existing.quantity++;
                } else {
                    game.inventory.push({
                        id: item.id,
                        name: item.name,
                        emoji: item.emoji,
                        type: item.name.includes("–µ–¥–∞") ? "food" : "item",
                        quantity: 1,
                        effect: { hunger: item.name.includes("–µ–¥–∞") ? 100 : 0 }
                    });
                }
            }
            
            addMessage(`üõí –ö—É–ø–ª–µ–Ω–æ: ${item.emoji} ${item.name}`, "success");
            updateDisplay();
            updateShopItems();
            updateInventoryItems();
        }

        // –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
        function showInventoryModal() {
            updateInventoryItems();
            document.getElementById('inventory-modal').style.display = 'flex';
        }

        function updateInventoryItems() {
            const container = document.getElementById('inventory-items');
            container.innerHTML = '';
            
            if (game.inventory.length === 0) {
                container.innerHTML = '<div style="color: #94a3b8; text-align: center; padding: 40px;">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div>';
                return;
            }
            
            game.inventory.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'inventory-item';
                
                let useBtn = '';
                if (item.type === 'food') {
                    useBtn = `<button class="use-btn" onclick="useItem(${index})">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>`;
                }
                
                div.innerHTML = `
                    <div class="item-emoji">${item.emoji}</div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${item.quantity}</div>
                    ${useBtn}
                `;
                container.appendChild(div);
            });
        }

        function useItem(index) {
            const item = game.inventory[index];
            if (!item || item.quantity <= 0) return;
            
            item.quantity--;
            if (item.quantity <= 0) {
                game.inventory.splice(index, 1);
            }
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞
            if (item.effect?.hunger) {
                game.pet.hunger = Math.min(100, game.pet.hunger + item.effect.hunger);
                game.pet.mood = Math.min(100, game.pet.mood + (item.effect.mood || 0));
                addMessage(`üçé –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ${item.name}`, "success");
            } else if (item.effect?.plant) {
                addMessage(`üå± –ü–æ—Å–∞–∂–µ–Ω—ã —Å–µ–º–µ–Ω–∞`, "success");
            }
            
            updateDisplay();
            updateInventoryItems();
        }

        // –ë–æ–∏
        function showBattleModal() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞
            document.getElementById('player-avatar').textContent = game.pet.avatar;
            document.getElementById('player-name').textContent = game.pet.name;
            document.getElementById('player-attack').textContent = game.pet.attack.toFixed(1);
            document.getElementById('player-defense').textContent = game.pet.defense.toFixed(1);
            document.getElementById('player-health').textContent = Math.round(game.pet.health);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
            const difficulties = [
                { name: "–°–ª–∞–π–º", avatar: "üü¢", difficulty: "easy", health: 50, attack: 8, defense: 3 },
                { name: "–ì–æ–±–ª–∏–Ω", avatar: "üë∫", difficulty: "easy", health: 60, attack: 10, defense: 5 },
                { name: "–ñ–µ–ª–µ–∑–Ω—ã–π —Å—Ç—Ä–∞–∂", avatar: "ü§ñ", difficulty: "medium", health: 80, attack: 12, defense: 10 },
                { name: "–û–≥–Ω–µ–Ω–Ω—ã–π –¥—Ä–∞–∫–æ–Ω", avatar: "üêâ", difficulty: "medium", health: 100, attack: 15, defense: 8 },
                { name: "–î—Ä–µ–≤–Ω–∏–π –≥–æ–ª–µ–º", avatar: "üóø", difficulty: "hard", health: 120, attack: 18, defense: 15 },
                { name: "–¢–µ–º–Ω—ã–π –≤–ª–∞—Å—Ç–µ–ª–∏–Ω", avatar: "üëπ", difficulty: "hard", health: 150, attack: 22, defense: 12 }
            ];
            
            const enemy = difficulties[Math.floor(Math.random() * difficulties.length)];
            
            document.getElementById('enemy-avatar').textContent = enemy.avatar;
            document.getElementById('enemy-name').textContent = enemy.name;
            document.getElementById('enemy-attack').textContent = enemy.attack;
            document.getElementById('enemy-defense').textContent = enemy.defense;
            document.getElementById('enemy-health').textContent = enemy.health;
            
            document.getElementById('battle-log').innerHTML = '<div style="color: #94a3b8; text-align: center;">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –±–æ—è</div>';
            
            document.getElementById('battle-modal').style.display = 'flex';
        }

        function startBattle(difficulty) {
            const log = document.getElementById('battle-log');
            log.innerHTML = '';
            
            const enemy = {
                name: document.getElementById('enemy-name').textContent,
                health: parseInt(document.getElementById('enemy-health').textContent),
                attack: parseInt(document.getElementById('enemy-attack').textContent),
                defense: parseInt(document.getElementById('enemy-defense').textContent)
            };
            
            let playerHealth = game.pet.health;
            let enemyHealth = enemy.health;
            let round = 1;
            
            const addBattleLog = (text, type = "info") => {
                const div = document.createElement('div');
                div.style.margin = '5px 0';
                div.style.color = type === 'damage' ? '#ef4444' : type === 'heal' ? '#10b981' : '#94a3b8';
                div.textContent = text;
                log.appendChild(div);
                log.scrollTop = log.scrollHeight;
            };
            
            addBattleLog(`‚öîÔ∏è –ë–æ–π –Ω–∞—á–∞–ª—Å—è! –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫: ${enemy.name}`, "info");
            
            const battleInterval = setInterval(() => {
                // –•–æ–¥ –∏–≥—Ä–æ–∫–∞
                const playerDamage = Math.max(1, game.pet.attack * (0.7 + Math.random() * 0.6) - enemy.defense * 0.3);
                enemyHealth -= playerDamage;
                addBattleLog(`–†–∞—É–Ω–¥ ${round}: –í—ã –Ω–∞–Ω–µ—Å–ª–∏ ${playerDamage.toFixed(1)} —É—Ä–æ–Ω–∞!`, "damage");
                
                if (enemyHealth <= 0) {
                    endBattle(true, difficulty);
                    clearInterval(battleInterval);
                    return;
                }
                
                // –•–æ–¥ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
                const enemyDamage = Math.max(1, enemy.attack * (0.7 + Math.random() * 0.6) - game.pet.defense * 0.3);
                playerHealth -= enemyDamage;
                addBattleLog(`${enemy.name} –Ω–∞–Ω—ë—Å ${enemyDamage.toFixed(1)} —É—Ä–æ–Ω–∞!`, "damage");
                
                if (playerHealth <= 0) {
                    endBattle(false, difficulty);
                    clearInterval(battleInterval);
                    return;
                }
                
                round++;
                
                if (round > 10) {
                    endBattle(false, difficulty);
                    clearInterval(battleInterval);
                }
            }, 1000);
        }

        function endBattle(win, difficulty) {
            const log = document.getElementById('battle-log');
            
            if (win) {
                // –ù–∞–≥—Ä–∞–¥–∞
                const rewards = {
                    easy: { coins: 20, exp: 15 },
                    medium: { coins: 40, exp: 25 },
                    hard: { coins: 70, exp: 40 }
                };
                
                const reward = rewards[difficulty];
                game.coins += reward.coins;
                game.exp += reward.exp;
                
                addMessage(`üéâ –ü–û–ë–ï–î–ê! –ü–æ–ª—É—á–µ–Ω–æ ${reward.coins} –º–æ–Ω–µ—Ç –∏ ${reward.exp} –æ–ø—ã—Ç–∞`, "success");
                log.innerHTML += `<div style="color: #10b981; margin-top: 10px;">üéâ –ü–û–ë–ï–î–ê! +${reward.coins} –º–æ–Ω–µ—Ç, +${reward.exp} –æ–ø—ã—Ç–∞</div>`;
                
                // –®–∞–Ω—Å –Ω–∞ –º—É—Ç–∞—Ü–∏—é
                if (Math.random() < 0.2) {
                    addRandomMutation();
                    log.innerHTML += `<div style="color: #a78bfa;">üß¨ –ü–æ–ª—É—á–µ–Ω–∞ –Ω–æ–≤–∞—è –º—É—Ç–∞—Ü–∏—è!</div>`;
                }
            } else {
                game.pet.health = Math.max(1, game.pet.health * 0.7);
                addMessage(`üíÄ –ü–æ—Ä–∞–∂–µ–Ω–∏–µ... –ü–∏—Ç–æ–º–µ—Ü —Ä–∞–Ω–µ–Ω`, "danger");
                log.innerHTML += `<div style="color: #ef4444; margin-top: 10px;">üíÄ –ü–æ—Ä–∞–∂–µ–Ω–∏–µ... –ó–¥–æ—Ä–æ–≤—å–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–æ ${Math.round(game.pet.health)}</div>`;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è
            if (game.exp >= game.expNeeded) {
                game.level++;
                game.exp = 0;
                game.expNeeded = game.level * 150;
                game.pet.maxHealth += 25;
                game.pet.health = game.pet.maxHealth;
                
                addMessage(`üéâ –£—Ä–æ–≤–µ–Ω—å ${game.level}! –ó–¥–æ—Ä–æ–≤—å–µ +25`, "success");
                log.innerHTML += `<div style="color: #f59e0b;">üéâ –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω –¥–æ ${game.level}!</div>`;
            }
            
            updateDisplay();
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function endGame() {
            const score = game.level * 100 + game.coins + game.mutations.length * 50;
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            
            modal.innerHTML = `
                <div class="modal-content">
                    <h2 class="modal-header">üèÅ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
                    <div style="text-align: center; margin: 30px 0;">
                        <div style="font-size: 1.2rem; margin: 10px 0;">üèÜ –£—Ä–æ–≤–µ–Ω—å: ${game.level}</div>
                        <div style="font-size: 1.2rem; margin: 10px 0;">üí∞ –ú–æ–Ω–µ—Ç—ã: ${game.coins}</div>
                        <div style="font-size: 1.2rem; margin: 10px 0;">üß¨ –ú—É—Ç–∞—Ü–∏–∏: ${game.mutations.length}</div>
                        <div style="font-size: 1.5rem; color: #f59e0b; margin: 20px 0;">‚≠ê –û–±—â–∏–π —Å—á–µ—Ç: ${score}</div>
                    </div>
                    <div style="text-align: center;">
                        <button class="use-btn" onclick="location.reload()" style="width: auto; padding: 15px 30px; font-size: 1.1rem;">
                            üéÆ –ù–æ–≤–∞—è –∏–≥—Ä–∞
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.onload = initGame;
    </script>
</body>
</html>
